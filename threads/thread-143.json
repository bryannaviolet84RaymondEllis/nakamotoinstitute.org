[
    {
        "thread_id": 143,
        "name": "Odin",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=626",
        "subject": "Linux distribution download",
        "url": "https://bitcointalk.org/index.php?topic=612.msg6312#msg6312",
        "date": "July 29, 2010, 03:22:37 AM",
        "content": "<div class=\"post\">Hi,<br/><br/>I am a software developer and while I am well versed with building things on Linux I thought I might provide some pointers to making like easier for others.<br/><br/><br/>There is one aspect with distributing a single download package for Linux that is dynamically linked, \"You should use the oldest versions of glibc/libstdc++ you can get away with.\u00a0 i.e. unless you know you need a new feature or a bug fix take is as a given that the libraries at runtime will be newer and contain those fixes.\"<br/><br/>The problem with linking against the bleeding edge versions of glibc/libstdc++ is that you force the users to have a bleeding edge system also (to run these binaries).\u00a0 Which should not be a necessary pre-requisite unless you know of specific cause for it to be so.\u00a0 Such causes should be explained in documentation. Where as if you simply linked on an older system it would work both on that older system and on the bleeding edge system.<br/><br/>If there are areas of C code which you really-really need some new and recent GCC optimization to be enabled, consider providing the dumped out ASM file *.s which you generate once from your bleeding edge GCC version but include in the source to allow anyone to complile (even on older GCC versions).<br/><br/><br/>Here are some recomendations:<br/>\u00a0* Use the oldest base distribution you can get away with to build the binaries.\u00a0 For example the most recent copy of the _PREVIOUS_ release of debian.\u00a0 Not the most update to date copy of the current release of debian.<br/>\u00a0* Provide a download containing static binaries (use the \"-static\" option to linking and maybe add this so the name of the executables \"bitcoind-static\"). Provide this in a seperate download file.<br/>\u00a0* Make the source distribution build work from working copies of the libraries they need.\u00a0 In particular boost and wxWidgets, if you know you need very recent versions of these to build against, then make building and linking work right out of their respective build tree (so you don't have to install them).\u00a0 Installing them in /usr/local maybe an issue (it certainly is for me) but having themin the current working directory just for bitcoin's use would be fine.\u00a0 At the end of the day all bincoin needs is access to header filer and DSOs or *.a to build and access to the DSOs at runtime.<br/><br/><br/>I can put a 24/7 headless bitcoind up but because of these issues, until I find/make time to resolve them I can not at this time.</div>",
        "post_num": 1,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 143,
        "name": "Odin",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=626",
        "subject": "Re: Linux distribution download",
        "url": "https://bitcointalk.org/index.php?topic=612.msg6317#msg6317",
        "date": "July 29, 2010, 03:44:10 AM",
        "content": "<div class=\"post\">Sorry to post to my own post.<br/><br/><br/>One possible solution would be to create a project on the OpenSUSE OBS platform <a href=\"http://wiki.meego.com/Build_Infrastructure\">http://wiki.meego.com/Build_Infrastructure</a> .<br/><br/>This platform is an auto-builder anyone can use (by creating your own account and home area).<br/><br/>You can upload your project and *.spec (build descriptor) and it will build your distribution in the format of all the leading Linux distributions (OpenSUSE, CentOS/RHEL, Fedora, Ubuntu, ...).\u00a0 So there is no need for you to maintain them seperately it will do that for you.<br/><br/>The result will be a *.deb or *.rpm or whatever your platform uses.</div>",
        "post_num": 2,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 143,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: Linux distribution download",
        "url": "https://bitcointalk.org/index.php?topic=612.msg6516#msg6516",
        "date": "July 29, 2010, 10:17:24 PM",
        "content": "<div class=\"post\">Yeah, acutely aware that I should have stayed on 9.04 or 9.10.\u00a0 It's a lot more work to downgrade than upgrade and I've been squeezed for time.\u00a0 Ubuntu is the most popular distro, so I'm staying with that.</div>",
        "post_num": 3,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 143,
        "name": "Odin",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=626",
        "subject": "Re: Linux distribution download",
        "url": "https://bitcointalk.org/index.php?topic=612.msg6540#msg6540",
        "date": "July 29, 2010, 11:10:15 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=612.msg6516#msg6516\">Quote from: satoshi on July 29, 2010, 10:17:24 PM</a></div><div class=\"quote\">Yeah, acutely aware that I should have stayed on 9.04 or 9.10.\u00a0 It's a lot more work to downgrade than upgrade and I've been squeezed for time.\u00a0 Ubuntu is the most popular distro, so I'm staying with that.</div><br/>Fair enough.\u00a0 I've not found any version of bitcoin that works with any enterprise version of Linux I have found.\u00a0 Often enterprise linux uses older tried and trusted versions several years old.\u00a0 This has parity with the LTS series of Ubuntu.<br/><br/>I think you'd be better doing your distribution with <a href=\"http://releases.ubuntu.com/hardy/\">http://releases.ubuntu.com/hardy/</a>\u00a0 (8.04.4 LTS Hardy Heron).\u00a0 If you really must use Ubuntu.\u00a0 This being the _PREVIOUS_ release of their LTS series, once 10.4 LTS passes the 18months old test consider a release engineering rebase.<br/><br/>Maybe you can setup a 2Gb \"8.04.4 LTS\" disk image using VirtualBox or Xen (just for rolling releases) and keep whatever version you want for desktop/development use.</div>",
        "post_num": 4,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 143,
        "name": "jgarzik",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=541",
        "subject": "Re: Linux distribution download",
        "url": "https://bitcointalk.org/index.php?topic=612.msg6545#msg6545",
        "date": "July 29, 2010, 11:22:54 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=612.msg6540#msg6540\">Quote from: Odin on July 29, 2010, 11:10:15 PM</a></div><div class=\"quote\">Maybe you can setup a 2Gb \"8.04.4 LTS\" disk image using VirtualBox or Xen (just for rolling releases) and keep whatever version you want for desktop/development use.<br/></div><br/>Yeah, some sort of virtual machine like qemu/KVM is really the best way to go, for older distro support.<br/><br/>Constantly reformatting your main dev machine is for the birds <img alt=\"Smiley\" border=\"0\" src=\"https://bitcointalk.org/Smileys/default/smiley.gif\"/><br/><br/>I have to support OpenSolaris and FreeBSD in my cloud computing project, in addition to the primary target, Linux.\u00a0 Virtual machines are a life-saver (and cost-saver).</div>",
        "post_num": 5,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 143,
        "name": "Odin",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=626",
        "subject": "Re: Linux distribution download",
        "url": "https://bitcointalk.org/index.php?topic=612.msg6554#msg6554",
        "date": "July 30, 2010, 12:24:46 AM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=612.msg6545#msg6545\">Quote from: jgarzik on July 29, 2010, 11:22:54 PM</a></div><div class=\"quote\">Yeah, some sort of virtual machine like qemu/KVM is really the best way to go, for older distro support.</div><br/>Just to clear up any (potential) misconception, from the use of the phrase \"for older distro support\". \u00a0Just because you compiled your application with an older distro doesn't mean it doesn't work on a newer distro many libraries are backwardly compatible in that way.<br/><br/>When they do change major DSO version (incompatible or breaking changes) some distributions still provide the ability to install the older compat libraries. \u00a0Its easier for a new distro to find older compat libraries than it is for an older distro to use a newer GLIBC.<br/><br/><br/>I am somewhat asserting that, if it is indeed possible to compile with older versions (because the features the newer versions add are not actually required by the application) then this version that should be made available via a single binary download (since it will work with the widest audience).<br/><br/><br/>Also to repeat, that the OpenSUSE Build Service is like a remote virtualized service which you can use compile your application on multiple major distributions and the output is a bunch of packages tailored to suit each distro.<br/><br/><br/>The clear problem I see is not with the support for aux lbiraries (Xlib,GTK+,OpenSSL,freetype) but with basic GLIBC and GCC libstdc++. \u00a0The problem with this is that you can't expect to simply place the DLLs you need in the same directory as the bitcoin executable and fix up LD_LIBRARY_PATH (man ld.so) so it can see them.<br/><br/>For example lets say that it was compiled with an older GTK+ than is available for your distribution of choice (a DSO major release change, this is indicated in the 2nd \"0\" in the /usr/lib{,64}/libgtk+-x11-2.0.so.0.1800.9) - note it is still zero, this indicates long term stability re-backward compatibility. \u00a0Well it is possible to easily fix this problem without installing the libraries by fixing them up with LD_LIBRARY_PATH. \u00a0But for glibc solving the problem in this way is not so straightforward.<br/></div>",
        "post_num": 6,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 143,
        "name": "Odin",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=626",
        "subject": "Re: Linux distribution download",
        "url": "https://bitcointalk.org/index.php?topic=612.msg6555#msg6555",
        "date": "July 30, 2010, 12:26:10 AM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=612.msg6549#msg6549\">Quote from: davidonpda on July 29, 2010, 11:40:06 PM</a></div><div class=\"quote\">Make him a virtual box container and upload it or mail him a disk. Then all he needs to do is install vbox and run it.</div><br/>Google found me <a href=\"http://virtualboxes.org/images/ubuntu/\">http://virtualboxes.org/images/ubuntu/</a><br/><br/>Maybe head for item 3 for <a href=\"http://downloads.sourceforge.net/virtualboximage/ubuntu-8.04-x86.7z\">http://downloads.sourceforge.net/virtualboximage/ubuntu-8.04-x86.7z</a> (505Mb download, for a 2.67Gb uncompressed image)</div>",
        "post_num": 7,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 143,
        "name": "jgarzik",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=541",
        "subject": "Re: Linux distribution download",
        "url": "https://bitcointalk.org/index.php?topic=612.msg6579#msg6579",
        "date": "July 30, 2010, 02:05:57 AM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=612.msg6554#msg6554\">Quote from: Odin on July 30, 2010, 12:24:46 AM</a></div><div class=\"quote\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=612.msg6545#msg6545\">Quote from: jgarzik on July 29, 2010, 11:22:54 PM</a></div><div class=\"quote\">Yeah, some sort of virtual machine like qemu/KVM is really the best way to go, for older distro support.</div><br/>Just to clear up any (potential) misconception, from the use of the phrase \"for older distro support\". \u00a0Just because you compiled your application with an older distro doesn't mean it doesn't work on a newer distro many libraries are backwardly compatible in that way.<br/><br/>When they do change major DSO version (incompatible or breaking changes) some distributions still provide the ability to install the older compat libraries. \u00a0Its easier for a new distro to find older compat libraries than it is for an older distro to use a newer GLIBC.<br/></div><br/>Most of what you say is true, but, bitcoin tends to be built against very specific versions of its dependent libs.\u00a0 Due to that, one tends to build bitcoin against custom compiled libs, regardless of underlying OS version.\u00a0 That practice makes glibc the primary compatibility worry.</div>",
        "post_num": 8,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 143,
        "name": "Odin",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=626",
        "subject": "Re: Linux distribution download",
        "url": "https://bitcointalk.org/index.php?topic=612.msg6758#msg6758",
        "date": "July 31, 2010, 01:04:00 AM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=612.msg6579#msg6579\">Quote from: jgarzik on July 30, 2010, 02:05:57 AM</a></div><div class=\"quote\">Most of what you say is true, but, bitcoin tends to be built against very specific versions of its dependent libs.\u00a0 Due to that, one tends to build bitcoin against custom compiled libs, regardless of underlying OS version.\u00a0 That practice makes glibc the primary compatibility worry.</div><br/><br/>Please cite exactly which library is using which feature of very recent glibc version (or any library for that matter) ? \u00a0(just so we can all understand the problem in the way you state).<br/><br/><br/>From what I can see wxWidgets and boost are linked statically. \u00a0I guess this is due to the \"build against very specific versions of its dependent libs\". \u00a0But from what I can see there is _NO_ need for either of thes libraries to use a recent glibc, wxWidgets for example only has a check for glibc 2.1 or newer (during its ./configure). \u00a0But it is not clear which features of wxWidgets 2.9.0 and/or boost 1.40.0 require the use of a glibc say above version 2.5 (which is also pretty old, but pretty compatibile). \u00a0I have sucessfully been able to build these versions (of wxWidgets/boost) against glibc 2.5.<br/><br/>I believe this can be confirmed by the use of -Bstatic in \"src/makefile.unix\".<br/><br/><br/>The only reason that glibc is a \"compatibility worry\" (as you put it) is because the project was build on a very new linux system. \u00a0This forces all the downloaders to have as-new-a linux system as the build system in order to run it. \u00a0This is not because there is some intrinsic compatibility worry as you describe it.<br/><br/><br/>I think I have created a custom wxWidgets 2.9.x build on OpenSUSE build service (OBS). \u00a0I shall have a go with \"boost\" over the new few hours if all goes well. \u00a0Then I can commit bitcoind package and get openSuSE builds. \u00a0Then I can enable other distribution repos (CentOS, Ubuntu, SLE, Fedora, etc...).<br/><br/>Can anyone confirm if boost \"1.40.0\" is needed or just \"1.40.0 or newer\" ? \u00a0since 1.42.x is current (and that is already available for a number of platforms as packages). \u00a0Can anyone explain the story behind this matter.<br/><br/>With wxWidgets 2.9.x is a development series so it is pre-release, so that is clear cut that a custom version needs to be built to get access to pre-release versions. \u00a0But this problem I have solved in an OBS build.</div>",
        "post_num": 9,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 143,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: Linux distribution download",
        "url": "https://bitcointalk.org/index.php?topic=612.msg6822#msg6822",
        "date": "July 31, 2010, 02:38:52 PM",
        "content": "<div class=\"post\">It can be built with Boost 1.37 or later.<br/></div>",
        "post_num": 10,
        "is_displayed": true,
        "nested_level": 0
    }
]