[
    {
        "thread_id": 91,
        "name": "knightmb",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=345",
        "subject": "Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2378#msg2378",
        "date": "July 12, 2010, 08:59:16 PM",
        "content": "<div class=\"post\">I did a forum search, didn't see this mentioned by anyone yet.<br/><br/>I have 5 Bit Coin clients, some running Windows Bit Coin, others running Linux Bit Coin.<br/><br/>I only have one 64 bit Linux system, but when I run Bit Coin, after about 10 minutes, the CPU usage runs away and brings the system to a stall unless I kill the Bit Coin application.<br/><br/>Now I have 2 other computers running a 32 bit Linux Bit Coin client and they work just fine, no runaway CPU.<br/><br/>I've tried running the 32 bit Bit Coin on the 64 bit Linux system, but the same thing still happens. My 64 bit Linux system has a dual-core processor, and even when I choose the \"use only 1 processor\" option, after a while Bit Coin ends up using both CPU to the 100% max that it can.<br/><br/>Is this a bug that only affects 64 bit Linux users at the moment?<br/><br/>Using the latest version 0.3.0 from the front page of the website.<br/><br/>System OS: Linux Mandriva 2010.0 (64 bit)<br/>RAM 16GB<br/>Processor - Intel Dual-Core 3.06 CPU<br/><br/>Feedback or advice welcome. \u00a0<img alt=\"Grin\" border=\"0\" src=\"https://bitcointalk.org/Smileys/default/grin.gif\"/><br/><br/><br/><sub>Edit by Xunie: I merged this thread with the other \"Bitcoin slowing down your Linux system?\" thread, so things my be confusing for a second, heh.</sub></div>",
        "post_num": 1,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "Xunie",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=10",
        "subject": "Re: Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2383#msg2383",
        "date": "July 12, 2010, 09:05:32 PM",
        "content": "<div class=\"post\">There has been a problem in settings the \"nice\" level on Linux.<br/>A programmer who wasn't familiar with Unix/Linux used the highest priority (-20) instead of the lowest priority (20)!<br/><br/>So, we have a bug.</div>",
        "post_num": 2,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "lachesis",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=237",
        "subject": "Re: Bitcoin slowing down your Linux system?",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2385#msg2385",
        "date": "July 12, 2010, 09:28:16 PM",
        "content": "<div class=\"post\">I never noticed responsiveness issues. Perhaps I should <i>nice</i> Bitcoin until the fix.</div>",
        "post_num": 3,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "lachesis",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=237",
        "subject": "Re: Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2386#msg2386",
        "date": "July 12, 2010, 09:29:03 PM",
        "content": "<div class=\"post\">I wondered about that, but I've never noticed any issues on a dual-core 64bit system.</div>",
        "post_num": 4,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "knightmb",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=345",
        "subject": "Re: Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2391#msg2391",
        "date": "July 12, 2010, 09:41:29 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=299.msg2383#msg2383\">Quote from: Xunie on July 12, 2010, 09:05:32 PM</a></div><div class=\"quote\">There has been a problem in settings the \"nice\" level on Linux.<br/>A programmer who wasn't familiar with Unix/Linux used the highest priority (-20) instead of the lowest priority (20)!<br/><br/>So, we have a bug.<br/></div>Yeah, that always gets me too. You would think a negative number would mean less and positive number means more, but it turns out \"Nice\" works the opposite of that, you want it to be more \"nice\" so you want a higher number, LOL.<br/><br/>I checked the 32bit Linux clients, they run a Nice level of 0, so I guess it's running equal time with everything else.<br/><br/>On the Windows clients, Bit Coin runs at \"normal\" priority as well.<br/><br/>It's easy to start the process in low priority via command line for both of them, so for now I can do that to manually control their priority\u00a0 <img alt=\"Grin\" border=\"0\" src=\"https://bitcointalk.org/Smileys/default/grin.gif\"/></div>",
        "post_num": 5,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "Xunie",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=10",
        "subject": "Re: Bitcoin slowing down your Linux system?",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2406#msg2406",
        "date": "July 12, 2010, 10:27:53 PM",
        "content": "<div class=\"post\">It automatically raises it, I don't think nice 20 ./bitcoin will help to be honest.<br/>I think some people have set higher priorities for themselves in /etc/security/limits.conf, and when -20 isn't available as a nice level, a lower priority is tried.<br/>So, I think the dirty hack of editing /etc/security/limits.conf might fix it.<br/><br/><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=299.msg2386#msg2386\">Quote from: lachesis on July 12, 2010, 09:29:03 PM</a></div><div class=\"quote\">I wondered about that, but I've never noticed any issues on a dual-core 64bit system.<br/></div>I don't have any problems on my quad core system here either!</div>",
        "post_num": 6,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "knightmb",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=345",
        "subject": "Re: Bitcoin slowing down your Linux system?",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2408#msg2408",
        "date": "July 12, 2010, 10:35:16 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=299.msg2406#msg2406\">Quote from: Xunie on July 12, 2010, 10:27:53 PM</a></div><div class=\"quote\">It automatically raises it, I don't think nice 20 ./bitcoin will help to be honest.<br/>I think some people have set higher priorities for themselves in /etc/security/limits.conf, and when -20 isn't available as a nice level, a lower priority is tried.<br/>So, I think the dirty hack of editing /etc/security/limits.conf might fix it.<br/><br/><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=299.msg2386#msg2386\">Quote from: lachesis on July 12, 2010, 09:29:03 PM</a></div><div class=\"quote\">I wondered about that, but I've never noticed any issues on a dual-core 64bit system.<br/></div>I don't have any problems on my quad core system here either!<br/></div><br/>That may be the issue because you can't \"Nice 20\" anything, 19 is the max\u00a0 <img alt=\"Wink\" border=\"0\" src=\"https://bitcointalk.org/Smileys/default/wink.gif\"/><br/><br/>So far, I've \"Nice 19\" 3 clients (one 64 bit and two 32 bit) for the last hour and they haven't changed the Nice level on me yet.<br/><br/>I figured since the process is started at that level, it would remain for all child processes spawned afterwards. I could be wrong though, I'll check again in another few hours to see.</div>",
        "post_num": 7,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "knightmb",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=345",
        "subject": "Re: Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2409#msg2409",
        "date": "July 12, 2010, 10:39:13 PM",
        "content": "<div class=\"post\">On a side note, I've tracked down the other GUI issue.<br/><br/><br/>The \"minimize to tray instead of taskbar\" is what was eating up all the CPU on my system. After I turned this off, the issue was resolved with Runaway CPU.<br/><br/>This only seems to affect the 64 bit Client, as the 32 bit Clients I have don't seem to be affected by this.<br/><br/>I did notice on the 64 bit Client, what happens is, it spawns multiple \"tray\" icons until X server finally kills over, so I guess I should submit that as a bug to somewhere?\u00a0 <img alt=\"Huh\" border=\"0\" src=\"https://bitcointalk.org/Smileys/default/huh.gif\"/></div>",
        "post_num": 8,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "asdfman",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=327",
        "subject": "Re: Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2412#msg2412",
        "date": "July 12, 2010, 10:59:19 PM",
        "content": "<div class=\"post\">knightmb - just curious, if you check not just the main process, but all the thread processes (ps -eflL | grep bitcoin - need the L, or else it will just show the main process), do you see the other thread processes change the priority after a little while ? \u00a0When I change the priority or renice, it will just stick for the main process, but some of threads will change priority everytime it goes to the generate coin function..<br/><br/>there may be some confusion in thinking that nice is working in that if people dont use -L to list all threads, they just see the PID of the main process, and think that the nice/renice has worked, when in fact the 2 subthreads that are maxing the CPU are the ones that are changing the priority back..<br/><br/>I myself just ripped out the whole priority changing function, so that whatever priority I set sticks permanently..<br/><br/>my post about ripping out priority change function is in : <a href=\"http://bitcointalk.org/index.php?topic=72.0\">http://bitcointalk.org/index.php?topic=72.0</a><br/>also shows the whole process tree.. in that code pasting, the main process would stay to whatever you nice/renice to, but 2 of the threads would change back, until i ripped out the function<br/><br/>also <a href=\"http://bitcointalk.org/index.php?topic=285.0\">http://bitcointalk.org/index.php?topic=285.0</a> describes the bug with bitcoin changing the threads to use the highest priority instead of lowest</div>",
        "post_num": 9,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "knightmb",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=345",
        "subject": "Re: Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2414#msg2414",
        "date": "July 12, 2010, 11:08:06 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=299.msg2412#msg2412\">Quote from: asdfman on July 12, 2010, 10:59:19 PM</a></div><div class=\"quote\">knightmb - just curious, if you check not just the main process, but all the thread processes (ps -eflL | grep bitcoin - need the L, or else it will just show the main process), do you see the other thread processes change the priority after a little while ? \u00a0When I change the priority or renice, it will just stick for the main process, but some of threads will change priority everytime it goes to the generate coin function..<br/></div><br/>Feedback from the ps -elfL | grep bitcoin command<br/><div class=\"codeheader\">Code:</div><div class=\"code\">[knightmb@KnightMB ~]$ ps -eflL | grep bitcoin<br/>0 S knightmb 11200 \u00a06781 11200 \u00a00 \u00a0 10 \u00a099 \u00a019 - 114169 poll_s 17:17 ? \u00a0 \u00a0 \u00a0 00:00:02 /home/knightmb/bin/bitcoin-0.3.0/bin/64/bitcoin<br/>1 S knightmb 11200 \u00a06781 11202 \u00a00 \u00a0 10 \u00a099 \u00a019 - 114169 hrtime 17:17 ? \u00a0 \u00a0 \u00a0 00:00:00 /home/knightmb/bin/bitcoin-0.3.0/bin/64/bitcoin<br/>1 S knightmb 11200 \u00a06781 11203 \u00a00 \u00a0 10 \u00a099 \u00a019 - 114169 hrtime 17:17 ? \u00a0 \u00a0 \u00a0 00:00:00 /home/knightmb/bin/bitcoin-0.3.0/bin/64/bitcoin<br/>1 S knightmb 11200 \u00a06781 11204 \u00a00 \u00a0 10 \u00a099 \u00a019 - 114169 hrtime 17:17 ? \u00a0 \u00a0 \u00a0 00:00:00 /home/knightmb/bin/bitcoin-0.3.0/bin/64/bitcoin<br/>1 S knightmb 11200 \u00a06781 11212 \u00a00 \u00a0 10 \u00a099 \u00a019 - 114169 sk_wai 17:17 ? \u00a0 \u00a0 \u00a0 00:00:00 /home/knightmb/bin/bitcoin-0.3.0/bin/64/bitcoin<br/>1 R knightmb 11200 \u00a06781 11213 \u00a00 \u00a0 10 \u00a099 \u00a019 - 114169 - \u00a0 \u00a0 17:17 ? \u00a0 \u00a0 \u00a0 \u00a000:00:00 /home/knightmb/bin/bitcoin-0.3.0/bin/64/bitcoin<br/>1 S knightmb 11200 \u00a06781 11214 \u00a00 \u00a0 10 \u00a099 \u00a019 - 114169 hrtime 17:17 ? \u00a0 \u00a0 \u00a0 00:00:00 /home/knightmb/bin/bitcoin-0.3.0/bin/64/bitcoin<br/>1 S knightmb 11200 \u00a06781 11215 \u00a00 \u00a0 10 \u00a082 \u00a0 2 - 114169 hrtime 17:17 ? \u00a0 \u00a0 \u00a0 00:00:00 /home/knightmb/bin/bitcoin-0.3.0/bin/64/bitcoin<br/>1 R knightmb 11200 \u00a06781 11216 86 \u00a0 10 \u00a099 \u00a019 - 114169 - \u00a0 \u00a0 17:17 ? \u00a0 \u00a0 \u00a0 \u00a000:40:37 /home/knightmb/bin/bitcoin-0.3.0/bin/64/bitcoin<br/>1 R knightmb 11200 \u00a06781 11219 85 \u00a0 10 \u00a099 \u00a019 - 114169 - \u00a0 \u00a0 17:17 ? \u00a0 \u00a0 \u00a0 \u00a000:40:11 /home/knightmb/bin/bitcoin-0.3.0/bin/64/bitcoin<br/>0 R knightmb 13291 12282 13291 \u00a00 \u00a0 \u00a01 \u00a080 \u00a0 0 - \u00a01842 - \u00a0 \u00a0 \u00a018:04 pts/1 \u00a0 \u00a000:00:00 grep --color bitcoin<br/></div><br/>Anything in that look out of place? I did notice one that was nice to \"2\" instead of \"19\"<br/><br/><br/>[edit] I see now from the other topic, I'm running the client, the other was the server daemon, might be a bug with just the daemon, not sure though.</div>",
        "post_num": 10,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "asdfman",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=327",
        "subject": "Re: Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2415#msg2415",
        "date": "July 12, 2010, 11:10:30 PM",
        "content": "<div class=\"post\">yep, that 2 is exactly what im talking about..<br/>wait a little longer and another thread might reset too.. after my change all my threads all stay 19 forever....</div>",
        "post_num": 11,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "knightmb",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=345",
        "subject": "Re: Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2418#msg2418",
        "date": "July 12, 2010, 11:15:01 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=299.msg2415#msg2415\">Quote from: asdfman on July 12, 2010, 11:10:30 PM</a></div><div class=\"quote\">yep, that 2 is exactly what im talking about..<br/>wait a little longer and another thread might reset too.. after my change all my threads all stay 19 forever....<br/></div>Ah I see now. Since you've already dove into the code and disabled the function, is there any reason why the function in question wouldn't just set everything to lowest priority by default? Why would it need to change it around? I'm afraid to dive in myself, otherwise I'll spend days fixing it, hehe.</div>",
        "post_num": 12,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "asdfman",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=327",
        "subject": "Re: Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2420#msg2420",
        "date": "July 12, 2010, 11:22:54 PM",
        "content": "<div class=\"post\">from what I saw, there was an error in util.h basically the THREAD_PRIORITY_LOWEST was defined as PRIO_MIN.. the intention was to switch to the \"lowest\" priority, but in the linux kernel source in resourch.h PRIO_MIN is actually the lowest NUMBER (-20), meaning it actually changed to the HIGHEST priority.. and then after that function is done, it will change priority again (to either 0 or 2, not as bad as -20) but either way it is changing it, so either way no matter what you nice/renice the threads to, it will switch to diff priority levels automatically, with those particular threads that switch priorities never being the most unobtrusive at 19..<br/><br/>Its been stated in the latest source code, this min/max is fixed, so if you dl the latest source tree and compile the min/max reversal should be fixed... personally I didnt care of having any of the threads change priority on its own at all, so I just removed the function alltogether..</div>",
        "post_num": 13,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "knightmb",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=345",
        "subject": "Re: Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2422#msg2422",
        "date": "July 12, 2010, 11:27:27 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=299.msg2420#msg2420\">Quote from: asdfman on July 12, 2010, 11:22:54 PM</a></div><div class=\"quote\">from what I saw, there was an error in util.h basically the THREAD_PRIORITY_LOWEST was defined as PRIO_MIN.. the intention was to switch to the \"lowest\" priority, but in the linux kernel source in resourch.h PRIO_MIN is actually the lowest NUMBER (-20), meaning it actually changed to the HIGHEST priority.. and then after that function is done, it will change priority again (to either 0 or 2, not as bad as -20) but either way it is changing it, so either way no matter what you nice/renice the threads to, it will switch to diff priority levels automatically, with those particular threads that switch priorities never being the most unobtrusive at 19..<br/></div>Yeah, I finally found it as well (I knew I shouldn't have peaked in the code, LOL). I'm going to try manually setting it to hard code 19 and see if that makes a difference after a compile. If so, it might be a more elegant solution that removing the function all together since it appears it's trying to balance out when to use more CPU depending on the system load.</div>",
        "post_num": 14,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "asdfman",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=327",
        "subject": "Re: Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2423#msg2423",
        "date": "July 12, 2010, 11:31:22 PM",
        "content": "<div class=\"post\">hardcoding to 19 should work, also you could just change PRIO_MIN to PRIO_MAX which would basically do the same thing, (technically PRIO_MAX is defined as 20 in the linux kernel source)<br/><br/>I agree that there authors saw some practicality in changing the priority depending on what the function is doing, but personally Id rather just have it not touch the priority at all, as the program will work just fine sitting at lowest priority all day.. I dont want it ever stealing any priority from any process regardless of what the thread is doing.. (maybe it would be a good suggestion to make this a command line parameter to disable/enable automatic priority adjustment - Im sure theres many who would prefer to keep the automatic priority scheduling in place, but also plenty that don't want any part of it)</div>",
        "post_num": 15,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "knightmb",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=345",
        "subject": "Re: Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2427#msg2427",
        "date": "July 12, 2010, 11:49:40 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=299.msg2423#msg2423\">Quote from: asdfman on July 12, 2010, 11:31:22 PM</a></div><div class=\"quote\">hardcoding to 19 should work, also you could just change PRIO_MIN to PRIO_MAX which would basically do the same thing, (technically PRIO_MAX is defined as 20 in the linux kernel source)<br/><br/>I agree that there authors saw some practicality in changing the priority depending on what the function is doing, but personally Id rather just have it not touch the priority at all, as the program will work just fine sitting at lowest priority all day.. I dont want it ever stealing any priority from any process regardless of what the thread is doing.. (maybe it would be a good suggestion to make this a command line parameter to disable/enable automatic priority adjustment - Im sure theres many who would prefer to keep the automatic priority scheduling in place, but also plenty that don't want any part of it)<br/></div><br/>Good point. I just wanted to test if it made a difference (I suspect it will). But after reading the other topics, seems the fix was already checked into the SVN, just not in time for the release so there is no sense in me trying a fix that which is already fixed code wise, hehe.<br/><br/>I agree though, it just needs to run at the lowest prioirty at *all* times, I mean it's suppose to run off of idle CPU and a nice level of 2 isn't far from *shared* CPU cycles than *idle* CPU cycles in my opinion.</div>",
        "post_num": 16,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "aceat64",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=430",
        "subject": "Re: Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2882#msg2882",
        "date": "July 14, 2010, 05:08:21 PM",
        "content": "<div class=\"post\">One fairly simple workaround is to run bitcoind as a user other than root. Since bitcoin does not require root permissions it will run just fine and it won't be able to set a negative niceness (only root can do that). That will ensure that the highest priority bitcoind can use is 0 (normal).</div>",
        "post_num": 17,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2908#msg2908",
        "date": "July 14, 2010, 06:45:53 PM",
        "content": "<div class=\"post\">After it initially tries incorrectly to set itself to the lowest priority, the generate thread only changes its priority again temporarily when it finds a block.\u00a0 When you've found a block, you should want it to hurry up and broadcast it as soon a possible before someone else finds one and makes yours invalid.\u00a0 The generate thread only changes to higher priority for less than a second every few days.<br/><br/>There should be a 0.3.1 release for this soon.\u00a0 There are a few other issues we need to look at fixing in 0.3.1 before making a release.<br/><br/><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=299.msg2409#msg2409\">Quote from: knightmb on July 12, 2010, 10:39:13 PM</a></div><div class=\"quote\">On a side note, I've tracked down the other GUI issue.<br/><br/>The \"minimize to tray instead of taskbar\" is what was eating up all the CPU on my system. After I turned this off, the issue was resolved with Runaway CPU.<br/><br/>This only seems to affect the 64 bit Client, as the 32 bit Clients I have don't seem to be affected by this.<br/><br/>I did notice on the 64 bit Client, what happens is, it spawns multiple \"tray\" icons until X server finally kills over, so I guess I should submit that as a bug to somewhere?\u00a0 <img alt=\"Huh\" border=\"0\" src=\"https://bitcointalk.org/Smileys/default/huh.gif\"/><br/></div>That's interesting.\u00a0 I know the minimize to tray on Ubuntu is very clunky, but I didn't know it had a CPU peg problem too.\u00a0 Anyone else able to reproduce this problem?\u00a0 We had this feature disabled on Linux before, but then it seemed better to have the imperfect UI than to lose the feature entirely.\u00a0 I'm thinking we should disable it again on Linux.</div>",
        "post_num": 18,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "knightmb",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=345",
        "subject": "Re: Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2910#msg2910",
        "date": "July 14, 2010, 06:52:54 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=299.msg2908#msg2908\">Quote from: satoshi on July 14, 2010, 06:45:53 PM</a></div><div class=\"quote\">After it initially tries incorrectly to set itself to the lowest priority, the generate thread only changes its priority again temporarily when it finds a block.\u00a0 When you've found a block, you should want it to hurry up and broadcast it as soon a possible before someone else finds one and makes yours invalid.\u00a0 The generate thread only changes to higher priority for less than a second every few days.<br/><br/>There should be a 0.3.1 release for this soon.\u00a0 There are a few other issues we need to look at fixing in 0.3.1 before making a release.<br/><br/><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=299.msg2409#msg2409\">Quote from: knightmb on July 12, 2010, 10:39:13 PM</a></div><div class=\"quote\">On a side note, I've tracked down the other GUI issue.<br/><br/>The \"minimize to tray instead of taskbar\" is what was eating up all the CPU on my system. After I turned this off, the issue was resolved with Runaway CPU.<br/><br/>This only seems to affect the 64 bit Client, as the 32 bit Clients I have don't seem to be affected by this.<br/><br/>I did notice on the 64 bit Client, what happens is, it spawns multiple \"tray\" icons until X server finally kills over, so I guess I should submit that as a bug to somewhere?\u00a0 <img alt=\"Huh\" border=\"0\" src=\"https://bitcointalk.org/Smileys/default/huh.gif\"/><br/></div>That's interesting.\u00a0 I know the minimize to tray on Ubuntu is very clunky, but I didn't know it had a CPU peg problem too.\u00a0 Anyone else able to reproduce this problem?\u00a0 We had this feature disabled on Linux before, but then it seemed better to have the imperfect UI than to lose the feature entirely.\u00a0 I'm thinking we should disable it again on Linux.<br/></div>It only seems to happen if<br/>A) you minimize to tray, later bring it back up, minimize again, bring it back up. It starts stacking tray icons out (but they are blank, but still labeled as BitCoin)<br/>B) sometimes the program does it randomly<br/><br/>I'll turn it back on with mine to make a screen shot, doesn't take long for it to happen, hehe.</div>",
        "post_num": 19,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "knightmb",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=345",
        "subject": "Re: Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2934#msg2934",
        "date": "July 14, 2010, 08:25:00 PM",
        "content": "<div class=\"post\">Ok, easy to replicate (well for me anyway)<br/><br/>64bit Client Linux<br/><br/>Having either the \"minimize to tray instead of taskbar\" or \"minimize on close\" options checked will cause the bug.<br/><br/>First thing you notice (as per the first screen-shot), the tasktray is being filled up with invisible icons \"spaces\". If you hover the mouse over them, they all say \"Bitcoin (not connected\" but the one that does have an Bit Coin icon, just says \"Bitcoin\" and that's what you can bring the window back up with.<br/><br/>If you just have \"minimize on close\" checked, it still sends it to task tray causing the bugs.<br/><br/>After a while, all your CPU will be consumed by the X server, even after you close Bitcoin, I think some process stay stuck in memory, not sure.<br/><br/>The 32bit Client for Linux doesn't have this exact issue. I will still make at least one invisible Bitcoin icon, but doesn't tear up the CPU later. So the 32 bit client sort-a has the bug, but not in a way to bring the system down after a short while.</div>",
        "post_num": 20,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "lachesis",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=237",
        "subject": "Re: Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg2943#msg2943",
        "date": "July 14, 2010, 08:50:56 PM",
        "content": "<div class=\"post\">Could you make it possible to reenable that feature with a startup switch or even compile flag? I like it a lot, and I don't have this issue.</div>",
        "post_num": 21,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg3008#msg3008",
        "date": "July 15, 2010, 12:18:23 AM",
        "content": "<div class=\"post\">OK, the undocumented switch \"-minimizetotray\" which re-enables the option.<br/><br/>I uploaded the change to SVN.</div>",
        "post_num": 22,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "knightmb",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=345",
        "subject": "Re: Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg3009#msg3009",
        "date": "July 15, 2010, 12:21:16 AM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=299.msg2943#msg2943\">Quote from: lachesis on July 14, 2010, 08:50:56 PM</a></div><div class=\"quote\">Could you make it possible to reenable that feature with a startup switch or even compile flag? I like it a lot, and I don't have this issue.<br/></div>I like it alot too, wished it work for me\u00a0 <img alt=\"Cheesy\" border=\"0\" src=\"https://bitcointalk.org/Smileys/default/cheesy.gif\"/></div>",
        "post_num": 23,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 91,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: Runaway CPU usage for 64bit BitCoin (Linux Client)",
        "url": "https://bitcointalk.org/index.php?topic=299.msg3309#msg3309",
        "date": "July 15, 2010, 10:22:30 PM",
        "content": "<div class=\"post\">The fix for the thread priority level on linux is available in the 0.3.1 release candidate here:<br/><a href=\"http://bitcointalk.org/index.php?topic=383.msg3198#msg3198\">http://bitcointalk.org/index.php?topic=383.msg3198#msg3198</a></div>",
        "post_num": 24,
        "is_displayed": true,
        "nested_level": 0
    }
]