[
    {
        "thread_id": 184,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9452#msg9452",
        "date": "August 15, 2010, 03:52:09 PM",
        "content": "<div class=\"post\">0.3.10 has tcatm's 4-way SSE2 as an option switch.<br/><br/>Use the switch \"-4way\" to turn it on. \u00a0Without the switch you get Crypto++ ASM SHA-256.<br/><br/>I could only get this working with Linux.<br/><br/>Download:<br/>Get 0.3.10 from <a href=\"http://bitcointalk.org/index.php?topic=827.0\">http://bitcointalk.org/index.php?topic=827.0</a><br/><br/>Please report back your CPU and results! \u00a0I think it's pretty clear that Core 2 and lower are slower, i5 faster. \u00a0I don't think we've heard any i7 results yet. \u00a0We need to know about the different models of AMD or other less common CPUs.<br/></div>",
        "post_num": 1,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "knightmb",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=345",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9457#msg9457",
        "date": "August 15, 2010, 05:02:16 PM",
        "content": "<div class=\"post\">I did a quick test, will report back when I try it on more machines.<br/><br/>Pentium E5300 Dual-Core 2.6 GHz (2MB cache, FSB 800MHz)<br/>Processor info: <a href=\"http://en.wikipedia.org/wiki/Wolfdale_%28microprocessor%29\">http://en.wikipedia.org/wiki/Wolfdale_%28microprocessor%29</a><br/>Stock = 2261 khash/s<br/>4-way = 1103 khash/s (64 bit)<br/><br/>Pentium 4 - 3.0GHz (hyper-threading off) 1MB Cache, FSB 800MHz<br/>Processor info: <a href=\"http://en.wikipedia.org/wiki/NetBurst_%28microarchitecture%29\">http://en.wikipedia.org/wiki/NetBurst_%28microarchitecture%29</a><br/>Stock = 1024 khash/s (32 bit)<br/>4-way = 658 khash/s (32 bit)<br/><br/>Pentium 4 - 2.8GHz (hyper-threading off) 1MB Cache, FSB 800MHz<br/>Processor info: <a href=\"http://en.wikipedia.org/wiki/NetBurst_%28microarchitecture%29\">http://en.wikipedia.org/wiki/NetBurst_%28microarchitecture%29</a><br/>Stock = 917 khash/s (64 bit)<br/>4-way = 747 khash/s (64 bit)<br/><br/><br/>If I didn't know better, I would say the key is the CPU cache size. Seems all the CPU that run slower have 2 MB or less onboard cache, where as the Core i5 starts with at least 3MB of onboard CPU cache.</div>",
        "post_num": 2,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9478#msg9478",
        "date": "August 15, 2010, 06:23:26 PM",
        "content": "<div class=\"post\">I hope someone can test an i5 or AMD to check that I built it right.\u00a0 I don't have either to test with.<br/><br/>I'm also curious if it performs much worse on 32-bit linux vs 64-bit.</div>",
        "post_num": 3,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "sgtstein",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=398",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9479#msg9479",
        "date": "August 15, 2010, 06:26:40 PM",
        "content": "<div class=\"post\">Where is the code for this? I'm on a CentOS 5.5 box and need to build it myself. Once I do that I will report back with linux 32-bit and 1MB cache Xeon. </div>",
        "post_num": 4,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9483#msg9483",
        "date": "August 15, 2010, 06:43:27 PM",
        "content": "<div class=\"post\">I just uploaded a quick build so testers can check if I built it right.\u00a0 (I don't have an i5 or AMD)\u00a0 If it checks out, I'll put together the full package and do all the release stuff.</div>",
        "post_num": 5,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "sgtstein",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=398",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9484#msg9484",
        "date": "August 15, 2010, 06:46:25 PM",
        "content": "<div class=\"post\">Okay, makes sense. I have an i7 930 I'll try and test out with too.</div>",
        "post_num": 6,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "tcatm",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=592",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9552#msg9552",
        "date": "August 15, 2010, 09:50:41 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9457#msg9457\">Quote from: knightmb on August 15, 2010, 05:02:16 PM</a></div><div class=\"quote\">If I didn't know better, I would say the key is the CPU cache size. Seems all the CPU that run slower have 2 MB or less onboard cache, where as the Core i5 starts with at least 3MB of onboard CPU cache.<br/></div><br/>That's unlikely. The loop accesses 432 bytes of data. That should fit in most caches.</div>",
        "post_num": 7,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "Ground Loop",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=382",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9592#msg9592",
        "date": "August 15, 2010, 11:49:40 PM",
        "content": "<div class=\"post\">5,911 khash with -4way<br/>11,260 without <br/>(Dual Xeon E5450, 64-bit, 8 threads)<br/></div>",
        "post_num": 8,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "tcatm",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=592",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9597#msg9597",
        "date": "August 16, 2010, 12:03:18 AM",
        "content": "<div class=\"post\">-4way: 12518 khash/s<br/>without: 6550 khash/s<br/><br/>It's a little bit slower than my patch (~14000kash/s).<br/><br/>edit: I ran the binary on an older AMD Athlon(tm) 64 X2 Dual Core Processor 4200+ with the same effect we see on older intel cpus:<br/>-4way: 1120khash/s<br/>without: 2012khash/s</div>",
        "post_num": 9,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "tcatm",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=592",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9600#msg9600",
        "date": "August 16, 2010, 12:08:38 AM",
        "content": "<div class=\"post\">Did anyone verify it to produce correct results on 32 bit hosts?</div>",
        "post_num": 10,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "gebler",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=661",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9610#msg9610",
        "date": "August 16, 2010, 12:32:57 AM",
        "content": "<div class=\"post\">Running 32-bit Linux on an AMD Athlon 64 X2, I get the following results:<br/><br/>\u00a0 normal: 2850 khash/s<br/>\u00a0 with -4way: 1708 khash/s<br/><br/>I haven't checked if the hashes are correct, just the speed.<br/></div>",
        "post_num": 11,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "aceat64",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=430",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9613#msg9613",
        "date": "August 16, 2010, 12:37:54 AM",
        "content": "<div class=\"post\">I created a wiki page so we can keep track of the results: <a href=\"http://www.bitcoin.org/wiki/doku.php?id=4-way_sse2\">http://www.bitcoin.org/wiki/doku.php?id=4-way_sse2</a></div>",
        "post_num": 12,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "tcatm",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=592",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9617#msg9617",
        "date": "August 16, 2010, 12:43:39 AM",
        "content": "<div class=\"post\">I propose to compile sha256.cpp with -O3 -march=amdfamk10 (will work on 32bit and 64bit) as only CPUs supporting this instruction set (AMD Phenom, Intel i5 and newer) benefit from -4way and it'll improve performance by ~9%.</div>",
        "post_num": 13,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "HostFat",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=203",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9620#msg9620",
        "date": "August 16, 2010, 12:47:23 AM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9617#msg9617\">Quote from: tcatm on August 16, 2010, 12:43:39 AM</a></div><div class=\"quote\">I propose to compile sha256.cpp with -O3 -march=amdfamk10 (will work on 32bit and 64bit) as only CPUs supporting this instruction set (AMD Phenom, Intel i5 and newer) benefit from -4way and it'll improve performance by ~9%.<br/></div>Good <img alt=\"Cheesy\" border=\"0\" src=\"https://bitcointalk.org/Smileys/default/cheesy.gif\"/><br/>Will this also work on Windows OS?</div>",
        "post_num": 14,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "tcatm",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=592",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9621#msg9621",
        "date": "August 16, 2010, 12:50:04 AM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9620#msg9620\">Quote from: Joozero on August 16, 2010, 12:47:23 AM</a></div><div class=\"quote\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9617#msg9617\">Quote from: tcatm on August 16, 2010, 12:43:39 AM</a></div><div class=\"quote\">I propose to compile sha256.cpp with -O3 -march=amdfamk10 (will work on 32bit and 64bit) as only CPUs supporting this instruction set (AMD Phenom, Intel i5 and newer) benefit from -4way and it'll improve performance by ~9%.<br/></div>Good <img alt=\"Cheesy\" border=\"0\" src=\"https://bitcointalk.org/Smileys/default/cheesy.gif\"/><br/>Will this also work on Windows OS?<br/></div>Didn't try it, but CFLAGS are not OS dependent at all so I guess it'll work.</div>",
        "post_num": 15,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "NewLibertyStandard",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=26",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9630#msg9630",
        "date": "August 16, 2010, 01:49:01 AM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9613#msg9613\">Quote from: aceat64 on August 16, 2010, 12:37:54 AM</a></div><div class=\"quote\">I created a wiki page so we can keep track of the results: <a href=\"http://www.bitcoin.org/wiki/doku.php?id=4-way_sse2\">http://www.bitcoin.org/wiki/doku.php?id=4-way_sse2</a><br/></div>You might want to add columns for whether hyper-threading is enabled, number of physical cores and how many cores Bitcoin is using. Without 4way, I get very slightly better results when I have half of my virtual cores hashing. With 4way, I get significantly better performance when I have all my virtual cores enabled. I think I get about the same amount of hashes when hyper threading is turned off with or without 4way.</div>",
        "post_num": 16,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "aceat64",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=430",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9640#msg9640",
        "date": "August 16, 2010, 02:13:28 AM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9630#msg9630\">Quote from: NewLibertyStandard on August 16, 2010, 01:49:01 AM</a></div><div class=\"quote\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9613#msg9613\">Quote from: aceat64 on August 16, 2010, 12:37:54 AM</a></div><div class=\"quote\">I created a wiki page so we can keep track of the results: <a href=\"http://www.bitcoin.org/wiki/doku.php?id=4-way_sse2\">http://www.bitcoin.org/wiki/doku.php?id=4-way_sse2</a><br/></div>You might want to add columns for whether hyper-threading is enabled, number of physical cores and how many cores Bitcoin is using. Without 4way, I get very slightly better results when I have half of my virtual cores hashing. With 4way, I get significantly better performance when I have all my virtual cores enabled. I think I get about the same amount of hashes when hyper threading is turned off with or without 4way.<br/></div><br/>I've updated the page with your suggestions, I've also added footnotes to explain some of the fields.</div>",
        "post_num": 17,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "jgarzik",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=541",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9647#msg9647",
        "date": "August 16, 2010, 02:30:52 AM",
        "content": "<div class=\"post\"><br/>My -4way results:\u00a0 slower for two older boxes, faster for newer one.<br/><br/><br/>(\"model name\" comes from Linux's /proc/cpuinfo, which reports directly from CPU)<br/><br/>1) model name\u00a0\u00a0\u00a0: Intel(R) Pentium(R) D CPU 3.00GHz<br/><br/>total cores: 2<br/>without -4way:\u00a0 \u00a0 0.999 Mhash/sec<br/>with -4way: 0.850 Mhash/sec<br/><br/>2) model name\u00a0\u00a0\u00a0: Dual Core AMD Opteron(tm) Processor 280<br/><br/>total cores: 4<br/>without -4way:\u00a0 \u00a04.6 Mhash/sec<br/>with -4way:\u00a0 \u00a0 4.0 Mhash/sec<br/><br/>3) model name\u00a0\u00a0\u00a0: Genuine Intel(R) CPU\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0000\u00a0 @ 3.20GHz<br/><br/>total cores: 4<br/>without -4way:\u00a0 \u00a05.7 Mhash/sec<br/>with -4way:\u00a0 \u00a0 7.0 Mhash/sec<br/><br/></div>",
        "post_num": 18,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9655#msg9655",
        "date": "August 16, 2010, 02:57:57 AM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9617#msg9617\">Quote from: tcatm on August 16, 2010, 12:43:39 AM</a></div><div class=\"quote\">I propose to compile sha256.cpp with -O3 -march=amdfamk10 (will work on 32bit and 64bit) as only CPUs supporting this instruction set (AMD Phenom, Intel i5 and newer) benefit from -4way and it'll improve performance by ~9%.<br/></div>GCC 4.3.3 doesn't support -march=amdfamk10.\u00a0 I get:<br/>sha256.cpp:1: error: bad value (amdfamk10) for -march= switch<br/><br/><br/><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9630#msg9630\">Quote from: NewLibertyStandard on August 16, 2010, 01:49:01 AM</a></div><div class=\"quote\">With 4way, I get significantly better performance when I have all my virtual cores enabled. I think I get about the same amount of hashes when hyper threading is turned off with or without 4way.<br/></div>Hey, you may be onto something!<br/><br/>hyperthreading didn't help before because all the work was in the arithmetic and logic units, which the hyperthreads share.<br/><br/>tcatm's SSE2 code must be a mix of normal x86 instructions and SSE2 instructions, so while one is doing x86 code, the other can do SSE2.<br/><br/>How much of an improvement do you get with hyperthreading?<br/><br/>Some numbers? \u00a0What CPU is that?<br/></div>",
        "post_num": 19,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "lfm",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=466",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9658#msg9658",
        "date": "August 16, 2010, 03:10:34 AM",
        "content": "<div class=\"post\">model name\u00a0 \u00a0 \u00a0 : AMD Phenom(tm) II X4 940 Processor\u00a0 at 3.0 ghz\u00a0 linux 64<br/><br/>with -4way\u00a0 \u00a0 \u00a0\"hashespersec\" : 11132770<br/><br/>without\u00a0 \u00a0 \u00a0 \"hashespersec\" : 5877668<br/><br/></div>",
        "post_num": 20,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "gridecon",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=692",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9659#msg9659",
        "date": "August 16, 2010, 03:15:44 AM",
        "content": "<div class=\"post\">I have two quadcore Phenom II 64-bit linux machines (ubuntu 9.10 both) and the -4way option increases my hashing speed so much I'm suspicious. I get about 5-6khash/sec on these boxes previously and without -4way option. With -4way I get over 11khash/sec! In other words, the -4way switch almost DOUBLES the reported hashing speed. This level of improvement seems more than expected and makes me wonder if my boxes are really doing the hashing that much faster or if there could possible be an issue where the math operations are actually being skipped over for some reason, causing illusory speed and an inability to actually generate blocks?</div>",
        "post_num": 21,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "Vasiliev",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=235",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9660#msg9660",
        "date": "August 16, 2010, 03:17:07 AM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9655#msg9655\">Quote from: satoshi on August 16, 2010, 02:57:57 AM</a></div><div class=\"quote\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9617#msg9617\">Quote from: tcatm on August 16, 2010, 12:43:39 AM</a></div><div class=\"quote\">I propose to compile sha256.cpp with -O3 -march=amdfamk10 (will work on 32bit and 64bit) as only CPUs supporting this instruction set (AMD Phenom, Intel i5 and newer) benefit from -4way and it'll improve performance by ~9%.<br/></div>GCC 4.3.3 doesn't support -march=amdfamk10.\u00a0 I get:<br/>sha256.cpp:1: error: bad value (amdfamk10) for -march= switch</div>try -march=amdfam10</div>",
        "post_num": 22,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit 0.3.9 rc2",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9661#msg9661",
        "date": "August 16, 2010, 03:23:04 AM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9660#msg9660\">Quote from: Vasiliev on August 16, 2010, 03:17:07 AM</a></div><div class=\"quote\">try -march=amdfam10<br/></div>That works.<br/><br/>That's strange...\u00a0 are we sure that's the same thing?\u00a0 tcatm, try amdfam10 and make sure you get the same speed measurement.</div>",
        "post_num": 23,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "Vasiliev",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=235",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9663#msg9663",
        "date": "August 16, 2010, 03:27:35 AM",
        "content": "<div class=\"post\"><a href=\"http://www.google.com/search?q=amdfamk10\">http://www.google.com/search?q=amdfamk10</a><br/><br/>I think he misremembered it since AMD arches are K#.</div>",
        "post_num": 24,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "lfm",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=466",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9664#msg9664",
        "date": "August 16, 2010, 03:30:35 AM",
        "content": "<div class=\"post\">model name \u00a0 \u00a0 \u00a0: Intel(R) Core(TM)2 Quad \u00a0CPU \u00a0 Q9450 \u00a0@ 2.66GHz, \u00a0 linux 64<br/><br/>no difference at about 4950 khash/s<br/><br/><br/></div>",
        "post_num": 25,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "jgarzik",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=541",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9665#msg9665",
        "date": "August 16, 2010, 03:35:28 AM",
        "content": "<div class=\"post\"><br/>Update for<br/><div class=\"codeheader\">Code:</div><div class=\"code\">cpu family<span style=\"white-space: pre;\"> </span>: 6<br/>model<span style=\"white-space: pre;\"> </span><span style=\"white-space: pre;\"> </span>: 26<br/>model name<span style=\"white-space: pre;\"> </span>: Genuine Intel(R) CPU\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0000\u00a0 @ 3.20GHz<br/>stepping<span style=\"white-space: pre;\"> </span>: 4</div><br/>Machine has 4 cores, each with 2 hyperthreads.\u00a0 /proc/cpuinfo shows 8 virtual processors.<br/><br/>without -4way, setgen 4:\u00a0 \u00a0 5.7 Mhash/sec<br/>without -4way, setgen 8:\u00a0 \u00a0 5.0 Mhash/sec<br/><br/>with -4way, setgen 4:\u00a0 \u00a07.0 Mhash/sec<br/>with -4way, setgen 8:\u00a0 \u00a09.3 Mhash/sec<br/><br/>So, the old wisdom of \"hyperthreading slows things down\" is now shattered, on this machine.<br/></div>",
        "post_num": 26,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "Ground Loop",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=382",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9674#msg9674",
        "date": "August 16, 2010, 04:34:20 AM",
        "content": "<div class=\"post\">No winners for 4way in my other three Intel machines either:<br/><br/>Intel(R) Core(TM)2 Duo CPU \u00a0 \u00a0 E8500 @ 3.16GHz (64-bit Linux)<br/>4way: 1565 \u00a0std: 3002<br/><br/>Intel(R) Xeon(TM) CPU 3.00GHz (32-bit Linux)<br/>4way: 1243 \u00a0std: 2048<br/><br/>Intel(R) Core(TM)2 CPU \u00a0 \u00a0 \u00a0 \u00a0 \u00a06300 \u00a0@ 1.86GHz<br/>4way: 932 \u00a0 std: 1733<br/><br/>(All running 0.3.10, -1 proclimit)<br/>Experiments with proclimit weren't any better.<br/><br/></div>",
        "post_num": 27,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9676#msg9676",
        "date": "August 16, 2010, 04:36:59 AM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9665#msg9665\">Quote from: jgarzik on August 16, 2010, 03:35:28 AM</a></div><div class=\"quote\"><div class=\"codeheader\">Code:</div><div class=\"code\">cpu family<span style=\"white-space: pre;\"> </span>: 6<br/>model<span style=\"white-space: pre;\"> </span><span style=\"white-space: pre;\"> </span>: 26<br/>model name<span style=\"white-space: pre;\"> </span>: Genuine Intel(R) CPU\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0000\u00a0 @ 3.20GHz<br/>stepping<span style=\"white-space: pre;\"> </span>: 4</div></div>cpu family 6 model 26 stepping 4 is an Intel Core i7.<br/>That's a 23% speedup with -4way, 63% total speedup with -4way + hyperthreading.<br/>33% faster with hyperthreading than without it.</div>",
        "post_num": 28,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "NewLibertyStandard",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=26",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9680#msg9680",
        "date": "August 16, 2010, 05:02:31 AM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9659#msg9659\">Quote from: gridecon on August 16, 2010, 03:15:44 AM</a></div><div class=\"quote\">I have two quadcore Phenom II 64-bit linux machines (ubuntu 9.10 both) and the -4way option increases my hashing speed so much I'm suspicious. I get about 5-6khash/sec on these boxes previously and without -4way option. With -4way I get over 11khash/sec! In other words, the -4way switch almost DOUBLES the reported hashing speed. This level of improvement seems more than expected and makes me wonder if my boxes are really doing the hashing that much faster or if there could possible be an issue where the math operations are actually being skipped over for some reason, causing illusory speed and an inability to actually generate blocks?<br/></div>o_O... good luck hashing, you're gonna need it!<br/><br/><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9655#msg9655\">Quote from: satoshi on August 16, 2010, 02:57:57 AM</a></div><div class=\"quote\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9630#msg9630\">Quote from: NewLibertyStandard on August 16, 2010, 01:49:01 AM</a></div><div class=\"quote\">With 4way, I get significantly better performance when I have all my virtual cores enabled. I think I get about the same amount of hashes when hyper threading is turned off with or without 4way.<br/></div>Hey, you may be onto something!<br/><br/>hyperthreading didn't help before because all the work was in the arithmetic and logic units, which the hyperthreads share.<br/><br/>tcatm's SSE2 code must be a mix of normal x86 instructions and SSE2 instructions, so while one is doing x86 code, the other can do SSE2.<br/><br/>How much of an improvement do you get with hyperthreading?<br/><br/>Some numbers?\u00a0 What CPU is that?<br/></div>Here are the results from my very poor memory on an i7 860 2.8 GHz with Ubuntu 10.04 amd64. Some of the numbers may be a bit off.<br/><br/>Without 4way, with HT, 4/8 virtual cores, 4.5-5 Mhash/sec<br/>Without 4way, with HT, 8/8 virtual cores, a bit less than above, but basically the same<br/><br/>With 4way, with HT, 8/8 virtual cores, 6.5-8 Mhash/sec (It may be my imagination, but it seems noticeably more variable.)<br/>With 4way, with HT, 4/8 virtual cores, 5-6 Mhash/sec<br/><br/>Without 4way, without HT, 4/4 physical cores, 4.5-5 Mhas/sec (But a bit slower than the first result.)<br/>With 4way, without HT, 4/4 physical cores, 5-6 Mhash/sec</div>",
        "post_num": 29,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "gridecon",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=692",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9688#msg9688",
        "date": "August 16, 2010, 05:30:15 AM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9680#msg9680\">Quote from: NewLibertyStandard on August 16, 2010, 05:02:31 AM</a></div><div class=\"quote\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9659#msg9659\">Quote from: gridecon on August 16, 2010, 03:15:44 AM</a></div><div class=\"quote\">I have two quadcore Phenom II 64-bit linux machines (ubuntu 9.10 both) and the -4way option increases my hashing speed so much I'm suspicious. I get about 5-6khash/sec on these boxes previously and without -4way option. With -4way I get over 11khash/sec! In other words, the -4way switch almost DOUBLES the reported hashing speed. This level of improvement seems more than expected and makes me wonder if my boxes are really doing the hashing that much faster or if there could possible be an issue where the math operations are actually being skipped over for some reason, causing illusory speed and an inability to actually generate blocks?<br/></div>o_O... good luck hashing, you're gonna need it!<br/></div>I guess that should read either mhash/sec or THOUSANDS of khash/sec...but hey, what's 3 orders of magnitude among friends?<br/><br/>Perhaps that typographical error is why nobody has answered whether or not a nearly 100% speeded from the -4way option is at all realistic? I'm not convinced the crypto hashing is really taking place at the rate of 11000khash/sec on my desktop box.</div>",
        "post_num": 30,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "jgarzik",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=541",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9689#msg9689",
        "date": "August 16, 2010, 05:33:56 AM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9676#msg9676\">Quote from: satoshi on August 16, 2010, 04:36:59 AM</a></div><div class=\"quote\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9665#msg9665\">Quote from: jgarzik on August 16, 2010, 03:35:28 AM</a></div><div class=\"quote\"><div class=\"codeheader\">Code:</div><div class=\"code\">cpu family<span style=\"white-space: pre;\"> </span>: 6<br/>model<span style=\"white-space: pre;\"> </span><span style=\"white-space: pre;\"> </span>: 26<br/>model name<span style=\"white-space: pre;\"> </span>: Genuine Intel(R) CPU\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0000\u00a0 @ 3.20GHz<br/>stepping<span style=\"white-space: pre;\"> </span>: 4</div></div>cpu family 6 model 26 stepping 4 is an Intel Core i7.<br/>That's a 23% speedup with -4way, 63% total speedup with -4way + hyperthreading.<br/>33% faster with hyperthreading than without it.<br/></div><br/><br/>Does bitcoin perform any self-tests at startup, to verify that hashing is working?<br/><br/><br/></div>",
        "post_num": 31,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "NewLibertyStandard",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=26",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9691#msg9691",
        "date": "August 16, 2010, 06:16:44 AM",
        "content": "<div class=\"post\">More importantly, about how long should it take 10 Mhash/sec to verify difficulty 1 blocks?<br/><br/>After the 64-bit Linux hashing bug was fixed I generated a block or two in short order, but since that one or two blocks, I have not generated a single block. It's starting to seem a little fishy.<br/><br/>I'm currently testing Bitcoin on two Linux 64-bit computers. Is there anything in the code blocking early block verification?<br/><br/>Edit: Never mind. I used the <a href=\"http://www.alloscomp.com/bitcoin/calculator.php\">Bitcoin Generation Calculator</a> and divided out the difficulty. Everything is fine here, I've generated a couple blocks with 4way. About to start testing without 4way.<br/><br/>Another Edit: My test only verifies that hashing works. It does not verify whether I'm really getting the displayed speed.</div>",
        "post_num": 32,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "tcatm",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=592",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9721#msg9721",
        "date": "August 16, 2010, 11:15:04 AM",
        "content": "<div class=\"post\">@satoshi: Oops, I meant -march=amdfam10. Sorry.<br/><br/>@everyone confused about improvement on Phenoms: I developed the code on a Phenom (940) and verified it (at least in 64bit mode) and the improvement you see is real. <br/><br/>Concerning Hyperthreading: It seems to give a little performance gain, maybe from running load/store instructions in parallel with aritmethic instructions. There's only a tiny bit of plain x86 instructions for glueing the function into the ABI. They take less than ~2% of the total CPU time (measured with gprof).</div>",
        "post_num": 33,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "teknohog",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=575",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9729#msg9729",
        "date": "August 16, 2010, 12:31:51 PM",
        "content": "<div class=\"post\">On a Core 2 Duo T7200, the default code gives about 1.8 Mhash/s, and 4way is slower at 1.0 Mhash/s. It has 4 MB of L2 cache, so it is probably not a question of cache size, as suggested at some point.<br/><br/>Unfortunately, the code (from svn) no longer compiles on ARM, as it now has SSE intrinsics hardcoded. I have removed the -msse2 and -DFOURWAYSSE2 flags from the makefile, and it still produces errors like this<br/><br/><div class=\"codeheader\">Code:</div><div class=\"code\">sha256.cpp:8:23: error: xmmintrin.h: No such file or directory<br/>sha256.cpp:34: error: \u0091__m128i\u0092 does not name a type<br/></div><br/>but hopefully this is easy to fix.</div>",
        "post_num": 34,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9736#msg9736",
        "date": "August 16, 2010, 01:38:01 PM",
        "content": "<div class=\"post\">I wrapped sha256.cpp in <br/>#ifdef FOURWAYSSE2<br/>#endif // FOURWAYSSE2<br/><br/>try it now.</div>",
        "post_num": 35,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "tommy",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=559",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9755#msg9755",
        "date": "August 16, 2010, 03:42:55 PM",
        "content": "<div class=\"post\">model name \u00a0 \u00a0 \u00a0: AMD Athlon(tm) 64 X2 Dual Core Processor 5600+<br/><br/>w/o -4way \u00a0\"hashespersec\" : 2539397<br/><br/>with -4way \u00a0\"hashespersec\" : 2108791<br/><br/>Linux, Debian, 32 bit.</div>",
        "post_num": 36,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "teknohog",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=575",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9769#msg9769",
        "date": "August 16, 2010, 04:41:31 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg9736#msg9736\">Quote from: satoshi on August 16, 2010, 01:38:01 PM</a></div><div class=\"quote\">I wrapped sha256.cpp in <br/>#ifdef FOURWAYSSE2<br/>#endif // FOURWAYSSE2<br/><br/>try it now.<br/></div><br/>Thanks, works fine now.</div>",
        "post_num": 37,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "hugolp",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=183",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg9935#msg9935",
        "date": "August 17, 2010, 06:26:27 PM",
        "content": "<div class=\"post\">Model: Intel Atom n330 (2 cores, 4 virtual).<br/><br/>OS: Ubuntu 10.04 64bit<br/><br/>Using the -4way option I get half the speed than using no option. </div>",
        "post_num": 38,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "denaje",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=857",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg10090#msg10090",
        "date": "August 18, 2010, 07:06:04 PM",
        "content": "<div class=\"post\">64-bit Gentoo / Intel Core i7<br/><br/>W/O 4way: 4324294<br/>With 4way: 7649415<br/><br/><br/><br/>32-bit Ubuntu VM on XP host /\u00a0 Intel Core 2 Duo<br/><br/>W/O 4way: 1751518<br/>With 4way: 793100</div>",
        "post_num": 39,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "Ground Loop",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=382",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg10163#msg10163",
        "date": "August 18, 2010, 11:00:08 PM",
        "content": "<div class=\"post\">So is it accurate to say that, so far, only Intel Core i7 processors and certain (Phenom?) AMD processors enjoy a speed bump from -4way?<br/></div>",
        "post_num": 40,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "nelisky",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=601",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg10164#msg10164",
        "date": "August 18, 2010, 11:02:25 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg10163#msg10163\">Quote from: Ground Loop on August 18, 2010, 11:00:08 PM</a></div><div class=\"quote\">So is it accurate to say that, so far, only Intel Core i7 processors and certain (Phenom?) AMD processors enjoy a speed bump from -4way?<br/><br/></div><br/>And i5, at least on my macbookpro</div>",
        "post_num": 41,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "Ground Loop",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=382",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg10167#msg10167",
        "date": "August 18, 2010, 11:14:26 PM",
        "content": "<div class=\"post\">Any non-Mac i5 love?<br/>Windows i5 64-bit got slower here.<br/>[correction -- not true.\u00a0 Windows doesn't have -4way, and the Linux machines are Xeons.]</div>",
        "post_num": 42,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "vess",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=621",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg10214#msg10214",
        "date": "August 19, 2010, 06:41:27 AM",
        "content": "<div class=\"post\">My Core i5 laptop (Ubuntu) doubled in speed. Actually, it didn't double in speed. It stayed the same speed, but only uses half the CPU now. I can't get it to go back to full CPU usage. That said, my laptop is a lot cooler when generating blocks now. I'll post back if I see it successfully go up to 100% usage.<br/></div>",
        "post_num": 43,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg10281#msg10281",
        "date": "August 19, 2010, 07:07:43 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg10167#msg10167\">Quote from: Ground Loop on August 18, 2010, 11:14:26 PM</a></div><div class=\"quote\">Any non-Mac i5 love?<br/>Windows i5 64-bit got slower here.<br/></div>That's the first I've heard anyone say i5 was slower. \u00a0Everyone else has said 4way was faster on i5. \u00a0Moreso with hyperthreading enabled.<br/><br/><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg10164#msg10164\">Quote from: nelisky on August 18, 2010, 11:02:25 PM</a></div><div class=\"quote\">And i5, at least on my macbookpro<br/></div>Good, so I take it that's a confirmation that it's working on Mac as well?<br/><br/>Laszlo told me he did compile in the -4way stuff on Mac, so the -4way switch is also available to try on Mac.\u00a0 I don't think makefile.osx on SVN has it yet, just the built version.</div>",
        "post_num": 44,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "nelisky",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=601",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg10299#msg10299",
        "date": "August 19, 2010, 08:28:19 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg10281#msg10281\">Quote from: satoshi on August 19, 2010, 07:07:43 PM</a></div><div class=\"quote\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg10164#msg10164\">Quote from: nelisky on August 18, 2010, 11:02:25 PM</a></div><div class=\"quote\">And i5, at least on my macbookpro<br/></div>Good, so I take it that's a confirmation that it's working on Mac as well?<br/><br/>Laszlo told me he did compile in the -4way stuff on Mac, so the -4way switch is also available to try on Mac.\u00a0 I don't think makefile.osx on SVN has it yet, just the built version.<br/></div><br/>Yep, it's working all right. The number I had posted were from an old svn revision patched with tcatm's changes, but today I compiled trunk and while I had to once again tweak the makefile, after I did it works great with the numbers matching what I experienced before.<br/><br/>Changes I did for my system are below, and while some are cosmetic, like removing wx-config from making bitcoind, just to avoid the warnings if you don't have it installed, others are system specific, like the DEPS dir, and the fact I don't have 32bit libs which makes the link step fail if -arch i386 is there.<br/>The bsddb changes are, I believe, a typo. Includes and Libs point to db46, but then the object list for the linker states db48. Anyway, here's the diff for what got me going:<br/><br/><div class=\"codeheader\">Code:</div><div class=\"code\">Index: makefile.osx<br/>===================================================================<br/>--- makefile.osx<span style=\"white-space: pre;\"> </span>(revision 139)<br/>+++ makefile.osx<span style=\"white-space: pre;\"> </span>(working copy)<br/>@@ -6,29 +6,29 @@<br/>\u00a0# Laszlo Hanyecz (solar@heliacal.net)<br/>\u00a0<br/>\u00a0CXX=llvm-g++<br/>-DEPSDIR=/Users/macosuser/bitcoin/deps<br/>+DEPSDIR=/opt/local<br/>\u00a0<br/>\u00a0INCLUDEPATHS= \\<br/>- -I\"$(DEPSDIR)/include\"<br/>+ -I\"$(DEPSDIR)/include\"\u00a0 -I\"$(DEPSDIR)/include/db46\"<br/>\u00a0<br/>\u00a0LIBPATHS= \\<br/>- -L\"$(DEPSDIR)/lib\"<br/>+ -L\"$(DEPSDIR)/lib\"\u00a0 -L\"$(DEPSDIR)/lib/db46\"<br/>\u00a0<br/>-WXLIBS=$(shell $(DEPSDIR)/bin/wx-config --libs --static)<br/>+WXLIBS=<br/>\u00a0<br/>\u00a0LIBS= -dead_strip \\<br/>- $(DEPSDIR)/lib/libdb_cxx-4.8.a \\<br/>- $(DEPSDIR)/lib/libboost_system.a \\<br/>- $(DEPSDIR)/lib/libboost_filesystem.a \\<br/>- $(DEPSDIR)/lib/libboost_program_options.a \\<br/>- $(DEPSDIR)/lib/libboost_thread.a \\<br/>+ $(DEPSDIR)/lib/db46/libdb_cxx-4.6.a \\<br/>+ $(DEPSDIR)/lib/libboost_system-mt.a \\<br/>+ $(DEPSDIR)/lib/libboost_filesystem-mt.a \\<br/>+ $(DEPSDIR)/lib/libboost_program_options-mt.a \\<br/>+ $(DEPSDIR)/lib/libboost_thread-mt.a \\<br/>\u00a0 $(DEPSDIR)/lib/libcrypto.a <br/>\u00a0<br/>-DEFS=$(shell $(DEPSDIR)/bin/wx-config --cxxflags) -D__WXMAC_OSX__ -DNOPCH -DMSG_NOSIGNAL=0<br/>+DEFS=-D__WXMAC_OSX__ -DNOPCH -DMSG_NOSIGNAL=0 -DFOURWAYSSE2<br/>\u00a0<br/>\u00a0DEBUGFLAGS=-g -DwxDEBUG_LEVEL=0<br/>\u00a0# ppc doesn't work because we don't support big-endian<br/>-CFLAGS=-mmacosx-version-min=10.5 -arch i386 -arch x86_64 -O3 -Wno-invalid-offsetof -Wformat $(DEBUGFLAGS) $(DEFS) $(INCLUDEPATHS)<br/>+CFLAGS=-mmacosx-version-min=10.5 -arch x86_64 -O3 -Wno-invalid-offsetof -Wformat $(DEBUGFLAGS) $(DEFS) $(INCLUDEPATHS)<br/>\u00a0HEADERS=headers.h strlcpy.h serialize.h uint256.h util.h key.h bignum.h base58.h \\<br/>\u00a0 \u00a0 \u00a0script.h db.h net.h irc.h main.h rpc.h uibase.h ui.h noui.h init.h<br/>\u00a0<br/>@@ -42,6 +42,7 @@<br/>\u00a0 \u00a0 \u00a0obj/rpc.o \\<br/>\u00a0 \u00a0 \u00a0obj/init.o \\<br/>\u00a0 \u00a0 \u00a0cryptopp/obj/sha.o \\<br/>+\u00a0 \u00a0 obj/sha256.o \\<br/>\u00a0 \u00a0 \u00a0cryptopp/obj/cpu.o<br/>\u00a0<span style=\"white-space: pre;\"> </span><br/>\u00a0<br/>@@ -55,7 +56,7 @@<br/>\u00a0<span style=\"white-space: pre;\"> </span>$(CXX) -c $(CFLAGS) -O3 -DCRYPTOPP_DISABLE_ASM -o $@ $&lt;<br/>\u00a0<br/>\u00a0bitcoin: $(OBJS) obj/ui.o obj/uibase.o<br/>-<span style=\"white-space: pre;\"> </span>$(CXX) $(CFLAGS) -o $@ $(LIBPATHS) $^ $(WXLIBS) $(LIBS)<br/>+<span style=\"white-space: pre;\"> </span>$(CXX) $(shell $(DEPSDIR)/bin/wx-config --cxxflags) $(CFLAGS) -o $@ $(LIBPATHS) $^ $(shell $(DEPSDIR)/bin/wx-config --libs --static) $(LIBS)<br/>\u00a0<br/>\u00a0<br/>\u00a0obj/nogui/%.o: %.cpp $(HEADERS)<br/></div></div>",
        "post_num": 45,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "ArtForz",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=584",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg10609#msg10609",
        "date": "August 21, 2010, 04:56:31 PM",
        "content": "<div class=\"post\">The difference between new and older CPUs is pretty easy to explain.<br/>Older microarchitectures have 64-bit mmx/sse execution units and split 128bit sse ops into 2 64bit microops.<br/>Newer archs have 128bit sse units.<br/><ul style=\"margin-top: 0; margin-bottom: 0;\"><li>AMD K8: 2 64bit units</li><li>intel Core/Core2: 3 64bit units</li><li>AMD K10: 2 128bit units</li><li>intel nehalem: 3 128bit units</li></ul>K10 = Opterons with 4 or more cores, Phenom, Phenom II, Athlon II<br/>nehalem = xeon 34xx/35xx/36xx/55xx/56xx/65xx/75xx, i3/i5/i7</div>",
        "post_num": 46,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg10720#msg10720",
        "date": "August 22, 2010, 11:21:50 PM",
        "content": "<div class=\"post\">Thanks for clearing that up. \u00a0I read the link someone posted about AMD making that change around 2007, but I didn't know what the story was for Intel.<br/><br/>There's no hope for Core/Core2 then.\u00a0 They only have half the SSE2 hardware.<br/><br/>Strange that Intel has 3 128bit units, but AMD with 2 128bit units is the faster one.<br/></div>",
        "post_num": 47,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "Ground Loop",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=382",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg10754#msg10754",
        "date": "August 23, 2010, 05:45:17 AM",
        "content": "<div class=\"post\">Intel Atom 230 @ 1.60GHz.\u00a0 Linux 32-bit.<br/>(Acer Aspire Revo)<br/><br/>Stock: 438 khash/sec (1 proc gives 354)<br/>4way:\u00a0 254 khash/sec<br/><br/>So you can take this one off the powerhouse list. <img alt=\"Smiley\" border=\"0\" src=\"https://bitcointalk.org/Smileys/default/smiley.gif\"/><br/>\u00a0<img alt=\"Grin\" border=\"0\" src=\"https://bitcointalk.org/Smileys/default/grin.gif\"/></div>",
        "post_num": 48,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "sgtstein",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=398",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg11032#msg11032",
        "date": "August 24, 2010, 05:31:08 PM",
        "content": "<div class=\"post\">Anybody catch the new AMD Bulldozer press release? If I understand correctly, it should be capable of processing 8 64bit hashes, per core, at the same time. Would be quite a speed boost using this same code design.<br/><br/><a href=\"http://hardware.slashdot.org/story/10/08/24/1521203/AMD-Details-Upcoming-Bulldozer-Architecture\">Slashdot</a> has the article.<br/><a href=\"http://www.pcper.com/article.php?aid=985&amp;type=expert\">PC Perspective</a> has the details.<br/><br/>Was also covered by <a href=\"http://www.anandtech.com/show/2872\">AnandTech</a> back in November, 2009.</div>",
        "post_num": 49,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg11068#msg11068",
        "date": "August 24, 2010, 10:43:56 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=820.msg10609#msg10609\">Quote from: ArtForz on August 21, 2010, 04:56:31 PM</a></div><div class=\"quote\"><ul style=\"margin-top: 0; margin-bottom: 0;\"><li>AMD K10: 2 128bit units</li><li>intel nehalem: 3 128bit units</li></ul></div>This probably explains why hyperthreading increases performance with -4way.\u00a0 If three SSE2 units is excessive, then hyperthreading would help keep them all busy.</div>",
        "post_num": 50,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "tcatm",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=592",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg11467#msg11467",
        "date": "August 28, 2010, 12:27:08 AM",
        "content": "<div class=\"post\">I just reviewed the sourcecode as I had a few ideas to optimize it further and I noticed that 4way is partly broken:<br/><br/>from main.cpp:<br/><div class=\"codeheader\">Code:</div><div class=\"code\">\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 for (int j = 0; j &lt; NPAR; j++) <br/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 <br/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if (thash[7][j] == 0)<br/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <br/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 for (int i = 0; i &lt; sizeof(hash)/4; i++) <br/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ((unsigned int*)&amp;hash)[i] = thash[i][j];<br/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 pblock-&gt;nNonce = ByteReverse(tmp.block.nNonce + j);<br/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 <br/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 <br/></div><br/>The code will only process one hash (the last with thash[7] == 0) out of 32 hashes even when there is more than one hash that might be a correct one.<br/><br/>Somethine like this should fix it but it won't be safe at higher difficulties. Also, I'm not sure whether the byte order should be reversed or not. Could someone review this?<br/><div class=\"codeheader\">Code:</div><div class=\"code\">\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 unsigned int min_hash = ~1;<br/>\u00a0 \u00a0 \u00a0 \u00a0for (int j = 0; j &lt; NPAR; j++) <br/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 <br/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if (thash[7][j] == 0)<br/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 <br/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if(thash[6][j] &lt; min_hash) {<br/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 min_hash = thash[6][j];<br/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 for (int i = 0; i &lt; sizeof(hash)/4; i++) <br/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ((unsigned int*)&amp;hash)[i] = thash[i][j];<br/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 pblock-&gt;nNonce = ByteReverse(tmp.block.nNonce + j);<br/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 <br/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 <br/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 <br/></div></div>",
        "post_num": 51,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 184,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: tcatm's 4-way SSE2 for Linux 32/64-bit is in 0.3.10",
        "url": "https://bitcointalk.org/index.php?topic=820.msg11503#msg11503",
        "date": "August 28, 2010, 02:27:15 PM",
        "content": "<div class=\"post\">The simplification is intentional. \u00a0There will only be more than one thash[7]=0 in one out of 134,217,728 cases. \u00a0It only makes it 0.0000007% slower.<br/></div>",
        "post_num": 52,
        "is_displayed": true,
        "nested_level": 0
    }
]