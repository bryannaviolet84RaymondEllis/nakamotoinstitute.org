[
    {
        "thread_id": 227,
        "name": "kermit",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=1697",
        "subject": "I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14506#msg14506",
        "date": "September 29, 2010, 11:05:57 AM",
        "content": "<div class=\"post\">Nothing I send gets confirmed now.\u00a0 <br/><br/>Here's how I did it:<br/><br/>I was sending out payments under .01 in size and not paying a transaction fee, which of course were never confirmed.<br/><br/>Here's a guess as to why it broke my wallet:<br/><br/>Because the change leftover was also then never confirmed, yet my client treats it as if it was so includes those amounts in the amounts it sends out.<br/><br/><br/><br/>I've only lost 100btc, so I'm not real worried, but if you know how to fix it without too much trouble, that'd be nice.</div>",
        "post_num": 1,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "Tritonio",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=779",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14515#msg14515",
        "date": "September 29, 2010, 12:27:57 PM",
        "content": "<div class=\"post\">You could edit your client to make it include into blocks any transactions without looking at the fee. And then wait a month or so until you make a block which will include your transactions... Or wait until someone else with a custom client includes your transactions in his block.</div>",
        "post_num": 2,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "theymos",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=35",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14517#msg14517",
        "date": "September 29, 2010, 12:38:32 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\">Quote from: kermit</div><div class=\"quote\">Because the change leftover was also then never confirmed, yet my client treats it as if it was so includes those amounts in the amounts it sends out.</div><br/>This seems likely. Try sending a ton of 0.01 transactions -- most of these transactions will work if this is the case.<br/><br/><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=1306.msg14515#msg14515\">Quote from: Tritonio on September 29, 2010, 12:27:57 PM</a></div><div class=\"quote\">Or wait until someone else with a custom client includes your transactions in his block.<br/></div><br/>For this you'll want to use the <i>-maxconnections</i> switch with a high number of connections, because propagation of your invalid transaction will be very poor.<br/><br/>You could also \"double-spend\" your pre-experiment coins by acting as though the unconfirmed transactions never happened. A wallet backup would roll things back, for example.</div>",
        "post_num": 3,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "Tritonio",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=779",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14518#msg14518",
        "date": "September 29, 2010, 12:40:24 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=1306.msg14517#msg14517\">Quote from: theymos on September 29, 2010, 12:38:32 PM</a></div><div class=\"quote\">For this you'll want to use the <i>-maxconnections</i> switch with a high number of connections, because propagation of your invalid transaction will be very poor.<br/></div><br/>Huh? Clients don't propagate what they consider invalid? I thought that they just didn't include it in their blocks...</div>",
        "post_num": 4,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "theymos",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=35",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14519#msg14519",
        "date": "September 29, 2010, 12:46:52 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=1306.msg14518#msg14518\">Quote from: Tritonio on September 29, 2010, 12:40:24 PM</a></div><div class=\"quote\">Huh? Clients don't propagate what they consider invalid? I thought that they just didn't include it in their blocks...<br/></div><br/>Hmm; I'm not sure about this case. They're not working on your new transaction because the previous transaction wasn't in a previous block and isn't in their memory pool. I don't know if they'd relay it.</div>",
        "post_num": 5,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "nanotube",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=1268",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14524#msg14524",
        "date": "September 29, 2010, 01:42:32 PM",
        "content": "<div class=\"post\">Hey, so i've been the recipient of a few of these microtransactions<br/>so now i have several transactions in my wallet that are now perpetually in the '0/unconfirmed' state<br/><br/>so the question is, if i send stuff, will it include those bitcoins in my sends, thus propagating the invalid chain? what is to be done here?<br/><br/>note also that this seems like a valid way to spam the network - send a bunch of microtransactions without the fee, so you can effectively multispend the same bit of btc and spam everyone's wallets with bogus microtransactions at no cost to you?</div>",
        "post_num": 6,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "Tritonio",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=779",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14525#msg14525",
        "date": "September 29, 2010, 01:51:15 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=1306.msg14524#msg14524\">Quote from: nanotube on September 29, 2010, 01:42:32 PM</a></div><div class=\"quote\">Hey, so i've been the recipient of a few of these microtransactions<br/>so now i have several transactions in my wallet that are now perpetually in the '0/unconfirmed' state<br/></div>They will get confirmed when someone that doesn't require fees include them in his/her block.<div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=1306.msg14524#msg14524\">Quote from: nanotube on September 29, 2010, 01:42:32 PM</a></div><div class=\"quote\">so the question is, if i send stuff, will it include those bitcoins in my sends, thus propagating the invalid chain? what is to be done here?<br/></div>There is no invalid chain just because someone didn't want to pay the fee. It will just take longer for them to get included in a block and until then they can be double spend if someone hasn't heard about them. BTW if nodes don't propagate transactions just because they don't like them it will be dangerous since it will be easier for someone to double spend bitcoins.<div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=1306.msg14524#msg14524\">Quote from: nanotube on September 29, 2010, 01:42:32 PM</a></div><div class=\"quote\">note also that this seems like a valid way to spam the network - send a bunch of microtransactions without the fee, so you can effectively multispend the same bit of btc and spam everyone's wallets with bogus microtransactions at no cost to you?<br/></div>You can also send the same 1BTC back and forth between two clients, using different addresses every time. If you do it fast enough you will probably be able to fill up the block that everyone is trying to generate and therefore make the network really slow and lower the chances for legitimate transactions to get into blocks... Also if you do it reeeealllly fast you could saturate the network for a long time, even after you exit the network. You will just leave the rest trying to fit hundreds of thousands of transactions into blocks... I don't know if there is any protection in the protocol from this kind of attacks... If not, they are quite easy to be done. We really need fixed transaction fees with the option to change your preferences on what is the fixed price you accept and what fee to include in your own transactions.</div>",
        "post_num": 7,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "kermit",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=1697",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14529#msg14529",
        "date": "September 29, 2010, 02:34:45 PM",
        "content": "<div class=\"post\">it seems this could take down the whole network depending on the logic behind combining lots.. as in if the micropayment without fee is combined with a normal transaction and has change, both the send and the change would never confirm either.\u00a0 so now you have 2 lots that will never confirm.\u00a0 repeat.<br/><br/>and it does seem the client lets you spend unconfirmed coin.</div>",
        "post_num": 8,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "nanotube",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=1268",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14544#msg14544",
        "date": "September 29, 2010, 03:27:50 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=1306.msg14525#msg14525\">Quote from: Tritonio on September 29, 2010, 01:51:15 PM</a></div><div class=\"quote\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=1306.msg14524#msg14524\">Quote from: nanotube on September 29, 2010, 01:42:32 PM</a></div><div class=\"quote\">Hey, so i've been the recipient of a few of these microtransactions<br/>so now i have several transactions in my wallet that are now perpetually in the '0/unconfirmed' state<br/></div>They will get confirmed when someone that doesn't require fees include them in his/her block.<br/></div><br/>yes and.... at this point /all/ clients require fees for transactions &lt;0.01, do you have any reason to expect that this will change at any point in the future? i don't. so \"never will get confirmed\" seems a reasonable approximation to reality.<br/><br/><div class=\"quoteheader\">Quote</div><div class=\"quote\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=1306.msg14524#msg14524\">Quote from: nanotube on September 29, 2010, 01:42:32 PM</a></div><div class=\"quote\">so the question is, if i send stuff, will it include those bitcoins in my sends, thus propagating the invalid chain? what is to be done here?<br/></div>There is no invalid chain just because someone didn't want to pay the fee. It will just take longer for them to get included in a block and until then they can be double spend if someone hasn't heard about them. BTW if nodes don't propagate transactions just because they don't like them it will be dangerous since it will be easier for someone to double spend bitcoins.<br/></div><br/>yes but the problem is that the client doesn't let the user choose which coins to spend, it does it all \"automagically\" behind the scenes. so how would a user know if he's sending confirmed coins or unconfirmed coins?<br/><br/><div class=\"quoteheader\">Quote</div><div class=\"quote\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=1306.msg14524#msg14524\">Quote from: nanotube on September 29, 2010, 01:42:32 PM</a></div><div class=\"quote\">note also that this seems like a valid way to spam the network - send a bunch of microtransactions without the fee, so you can effectively multispend the same bit of btc and spam everyone's wallets with bogus microtransactions at no cost to you?<br/></div>You can also send the same 1BTC back and forth between two clients, using different addresses every time. If you do it fast enough you will probably be able to fill up the block that everyone is trying to generate and therefore make the network really slow and lower the chances for legitimate transactions to get into blocks... Also if you do it reeeealllly fast you could saturate the network for a long time, even after you exit the network. You will just leave the rest trying to fit hundreds of thousands of transactions into blocks... I don't know if there is any protection in the protocol from this kind of attacks... If not, they are quite easy to be done. We really need fixed transaction fees with the option to change your preferences on what is the fixed price you accept and what fee to include in your own transactions.<br/></div><br/>yes, but that's a separate issue. i'm really trying to figure out what, if anything, to be doing about the handful of never-to-be-confirmed transactions i have in my wallet, whether the client will prioritize sending other coins first or not, and if not... that means it's possible that i'll never be able to make a send transaction that will be confirmed, because the unconfirmed bits of coin will be included. which would in turn mean that my whole wallet is foobar.</div>",
        "post_num": 9,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "theymos",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=35",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14552#msg14552",
        "date": "September 29, 2010, 03:56:04 PM",
        "content": "<div class=\"post\">I checked the code. It seems that the transactions will be relayed, since they pass AcceptToMemoryPool. The network will tend to forget these transactions because the memory pool is cleared when Bitcoin shuts down, and as far as I can tell nodes never relay transactions that they already have in their memory pool.<br/><br/><div class=\"quoteheader\">Quote from: Tritonio</div><div class=\"quote\">I don't know if there is any protection in the protocol from this kind of attacks</div><br/>There is. The more transactions waiting to be included in a block, the higher the transaction fee has to be for one to get in.</div>",
        "post_num": 10,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "wscott",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=1682",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14567#msg14567",
        "date": "September 29, 2010, 04:54:41 PM",
        "content": "<div class=\"post\">And in the future node could certainly drop connections from nodes that generate bad transactions.</div>",
        "post_num": 11,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "nanotube",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=1268",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14583#msg14583",
        "date": "September 29, 2010, 05:55:49 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=1306.msg14552#msg14552\">Quote from: theymos on September 29, 2010, 03:56:04 PM</a></div><div class=\"quote\">I checked the code. It seems that the transactions will be relayed, since they pass AcceptToMemoryPool. The network will tend to forget these transactions because the memory pool is cleared when Bitcoin shuts down, and as far as I can tell nodes never relay transactions that they already have in their memory pool.<br/><br/><div class=\"quoteheader\">Quote from: Tritonio</div><div class=\"quote\">I don't know if there is any protection in the protocol from this kind of attacks</div><br/>There is. The more transactions waiting to be included in a block, the higher the transaction fee has to be for one to get in.<br/></div><br/>theymos: well... the problem is that it causes problems for the wallets that happen to have received those transactions. my wallet now includes a bunch of small transactions that will never be confirmed (due to their not having paid the requisite fees). <br/><br/>since the client does not let the user control which coins to send, any transaction i send out in the future is liable to try to include those coins in the outgoing payment, which, in turn, will never get confirmed, thus borking my whole wallet.<br/><br/>so say a 'rogue' client harvests a bunch of addresses of the net (these forums are a good and ripe place), and starts sending out a bunch of .000001 payments with no fee. now these wallets will all be contaminated with these never-to-be-confirmed payments, and since the client doesn't allow one to choose which coins get sent, they may be included in future outgoing payments, which will also never get confirmed.<br/><br/>so what should i do to 'clear' my wallet? i'd need some custom tool to be able to send /specific coins/, so that i can send them all to another wallet and drop the contaminated one.<br/><br/>and more importantly, for the future - how do we address this problem? </div>",
        "post_num": 12,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "theymos",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=35",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14592#msg14592",
        "date": "September 29, 2010, 06:28:47 PM",
        "content": "<div class=\"post\">At (roughly) line 3191 in main.cpp (SelectCoins), change the <i>if</i> statement to this:<br/><div class=\"codeheader\">Code:</div><div class=\"code\">if (!pcoin-&gt;IsFinal() || pcoin-&gt;fSpent || pcoin-&gt;GetDepthInMainChain() &lt; 1)</div><br/>Your client will then no longer consider coins with 0 confirmations when choosing coins.</div>",
        "post_num": 13,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "jgarzik",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=541",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14595#msg14595",
        "date": "September 29, 2010, 06:37:56 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=1306.msg14592#msg14592\">Quote from: theymos on September 29, 2010, 06:28:47 PM</a></div><div class=\"quote\">At (roughly) line 3191 in main.cpp (SelectCoins), change the <i>if</i> statement to this:<br/><div class=\"codeheader\">Code:</div><div class=\"code\">if (!pcoin-&gt;IsFinal() || pcoin-&gt;fSpent || pcoin-&gt;GetDepthInMainChain() &lt; 1)</div><br/>Your client will then no longer consider coins with 0 confirmations when choosing coins.<br/></div><br/>IMO, this should make it into the upstream bitcoin client, as either<br/><ul style=\"margin-top: 0; margin-bottom: 0;\"><li>a command line switch, requiring confirmation for all sent coins</li><li>a two-pass search:\u00a0 search first for confirmed coins.\u00a0 if not enough confirmed coins are available, use unconfirmed coins.</li></ul></div>",
        "post_num": 14,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "theymos",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=35",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14596#msg14596",
        "date": "September 29, 2010, 06:47:21 PM",
        "content": "<div class=\"post\">The best option might be four passes at 120, 6, 1, and 0, to somewhat prioritize based on depth.</div>",
        "post_num": 15,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "Tritonio",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=779",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14598#msg14598",
        "date": "September 29, 2010, 06:50:53 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=1306.msg14583#msg14583\">Quote from: nanotube on September 29, 2010, 05:55:49 PM</a></div><div class=\"quote\">and more importantly, for the future - how do we address this problem? <br/></div><br/>I really don't care about extremelly fast transactions. It would be enough for me if Bitcoin didn't even show unconfirmed transactions and didn't even try to spend them before they get confirmed. FFS just wait 10minutes for a block to appear confirming them.\u00a0 <img alt=\"Grin\" border=\"0\" src=\"https://bitcointalk.org/Smileys/default/grin.gif\"/></div>",
        "post_num": 16,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "nanotube",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=1268",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14603#msg14603",
        "date": "September 29, 2010, 07:13:23 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=1306.msg14592#msg14592\">Quote from: theymos on September 29, 2010, 06:28:47 PM</a></div><div class=\"quote\">At (roughly) line 3191 in main.cpp (SelectCoins), change the <i>if</i> statement to this:<br/><div class=\"codeheader\">Code:</div><div class=\"code\">if (!pcoin-&gt;IsFinal() || pcoin-&gt;fSpent || pcoin-&gt;GetDepthInMainChain() &lt; 1)</div><br/>Your client will then no longer consider coins with 0 confirmations when choosing coins.<br/></div><br/>thanks theymos for the patch!<br/><br/>i guess now i have to figure out how to build bitcoind.... <img alt=\"Smiley\" border=\"0\" src=\"https://bitcointalk.org/Smileys/default/smiley.gif\"/><br/><br/>or maybe i'll just wait around for this to make it into the next official release... <br/>if satoshi agrees with jgarzik as far as including those options in mainline, maybe i don't have to wait that long...</div>",
        "post_num": 17,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "kermit",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=1697",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14611#msg14611",
        "date": "September 29, 2010, 07:47:17 PM",
        "content": "<div class=\"post\">Some people might want to add the <br/><br/>pcoin-&gt;GetDepthInMainChain() &lt; 1 <br/><br/>in GetBalance() too.</div>",
        "post_num": 18,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "jgarzik",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=541",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14615#msg14615",
        "date": "September 29, 2010, 07:58:47 PM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=1306.msg14611#msg14611\">Quote from: kermit on September 29, 2010, 07:47:17 PM</a></div><div class=\"quote\">Some people might want to add the <br/><br/>pcoin-&gt;GetDepthInMainChain() &lt; 1 <br/><br/>in GetBalance() too.<br/></div><br/>Well, I would rather split \"balance\" in two:\u00a0 confirmed and unconfirmed balances.<br/></div>",
        "post_num": 19,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "nanotube",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=1268",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14621#msg14621",
        "date": "September 29, 2010, 08:58:33 PM",
        "content": "<div class=\"post\">ok, so i built a modified bitcoind, with the addition of 'pcoin-&gt;GetDepthInMainChain() &lt; 1' to both SelectCoins and GetBalance. <br/><br/>My 'stock client' balance shows as 131.00139787, and my modified client balance shows as 130.92112098, so i have about 0.08xx of \"bad\" bitcoins' worth of transactions in my wallet.<br/><br/>So I guess now, all i need to do is create another wallet, and then send all the \"good coins\" from my old wallet to my new one (or, i guess... i could just use the same wallet, since my bitcoind won't try to send the bad coins, i can just ignore them....)<br/><br/>But yes, I hope the modifications as described by jgarzik (being configurable with cli switches/checkboxes) do make it into mainline - because otherwise it's too easy to 'poison' people's wallets with bogus transactions.</div>",
        "post_num": 20,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14714#msg14714",
        "date": "September 30, 2010, 04:38:53 PM",
        "content": "<div class=\"post\">As you figured out, the root problem is we shouldn't be counting or spending transactions until they have at least 1 confirmation.\u00a0 0/unconfirmed transactions are very much second class citizens.\u00a0 At most, they are advice that something has been received, but counting them as balance or spending them is premature.<br/><br/>I made changes so they show up in lighter print, with the credit amount in square brackets like [+1.23], and the amount not counted towards your balance and not available for spending.\u00a0 This doesn't apply to transactions you sent, which you implicitly trust, since you wrote them.<br/><br/>I didn't make it (+1.23) because parenthesis in accounting means negative.\u00a0 I hope square brackets is different enough to be clear what is meant.<br/><br/>The JSON-RPC interface can still see 0/unconfirmed if it wants by specifying 0 confirmations.<br/><br/>I uploaded the changes to SVN rev 158.\u00a0 I will post a 0.3.13 RC shortly.<br/><br/>If you have any of these transactions in your wallet, do not send any payments until you've upgraded to 0.3.13, which will be coming soon.<br/><br/>If you've already sent any of these transactions, or you're the creator of them, then use theymos' patch or make the following change and use it to send your clean transactions to a new wallet to clean things up.<br/><br/>change:<br/>\u00a0 \u00a0 if (pcoin-&gt;GetDepthInMainChain() &lt; 1 &amp;&amp; pcoin-&gt;GetDebit() &lt;= 0)<br/>\u00a0 \u00a0 \u00a0 \u00a0 continue;<br/>to:<br/>\u00a0 \u00a0 if (pcoin-&gt;GetDepthInMainChain() &lt; 1)<br/>\u00a0 \u00a0 \u00a0 \u00a0 continue;<br/></div>",
        "post_num": 21,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg14720#msg14720",
        "date": "September 30, 2010, 04:59:00 PM",
        "content": "<div class=\"post\">0.3.13 release candidate, please test:<br/><a href=\"http://www.bitcoin.org/download/bitcoin-0.3.13-rc1-win32-setup.exe\">http://www.bitcoin.org/download/bitcoin-0.3.13-rc1-win32-setup.exe</a><br/></div>",
        "post_num": 22,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "kermit",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=1697",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg15001#msg15001",
        "date": "October 02, 2010, 02:17:40 PM",
        "content": "<div class=\"post\">So in .13 1 confirm is good enough to pay someone with, but it takes 6 to display \"confirmed\" in the GUI. \u00a0 This is inconsistant. \u00a0This coin is good enough to pay you with but not good enough for me to accept? \u00a0I don't know the logic behind the 6, but whatever it is, if its only used to decide which word to display, then is it really\u00a0 representing anything at all?</div>",
        "post_num": 23,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 227,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: I broke my wallet, sends never confirm now.",
        "url": "https://bitcointalk.org/index.php?topic=1306.msg15672#msg15672",
        "date": "October 06, 2010, 04:54:23 PM",
        "content": "<div class=\"post\">That's going to be more of a SelectCoins thing.<br/><br/>SVN rev 161 has a refinement to recursively determine if your own unconfirmed transactions can be spent.\u00a0 This is needed because you should be able to spend your own change right away.<br/><br/>The new recursive determination is: 0/unconfirmed can be spent if it's yours and all its dependencies are either in a block or also yours.<br/><br/>Here's a Windows build:<br/><a href=\"http://www.bitcoin.org/download/bitcoin-0.3.13.2-win32-setup.exe\">http://www.bitcoin.org/download/bitcoin-0.3.13.2-win32-setup.exe</a><br/><br/>This version is an improvement if you already had a 0/unconfirmed transaction and might have already spent it.\u00a0 If you were the original creator of a 0/unconfirmed transaction, you still need theymos' patch instead.</div>",
        "post_num": 24,
        "is_displayed": true,
        "nested_level": 0
    }
]