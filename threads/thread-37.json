[
    {
        "thread_id": 37,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg452#msg452",
        "date": "February 23, 2010, 10:15:41 PM",
        "content": "<div class=\"post\">Version 0.2.6 on SVN can now run as a daemon and be controlled by command line or JSON-RPC.<br/><br/>On Linux it needs libgtk2.0-0 installed, but does not need a GUI running. \u00a0Hopefully gtk can be installed without having a windowing system installed.<br/><br/>The command to start as a daemon is:<br/>bitcoin -daemon [switches...]<br/><br/>Or, to run the UI normally and also be able to control it from command line or JSON-RPC, use the \"-server\" switch.<br/>bitcoin -server [switches...]<br/><br/>With either switch, it runs an HTTP JSON-RPC server that accepts local socket connections on 127.0.0.1:8332. \u00a0The port is bound to loopback and can only be accessed from the local machine, but from any account, not just the user it's running under.<br/><br/>To control it from the command line, the interface is a command name without any switches, followed by parameters if any.<br/>bitcoin &lt;command&gt; [params...]<br/><br/>For example:<br/>bitcoin getinfo<br/>bitcoin getdifficulty<br/>bitcoin setgenerate true<br/>bitcoin stop<br/><br/>It's a simple JSON-RPC client and prints the JSON result. \u00a0Look at rpc.cpp for the list of commands.<br/><br/>Web apps or anything automated will normally use JSON-RPC directly, not command line. \u00a0There are JSON-RPC libraries for all the major languages. \u00a0In script languages like PHP and Python the syntax is as natural as calling a local function.</div>",
        "post_num": 1,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "The Madhatter",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=14",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg459#msg459",
        "date": "February 24, 2010, 02:29:17 AM",
        "content": "<div class=\"post\">Oh thank you!<br/><br/>You have no idea how badly I needed something like this.<br/><br/>I will have a payment library built in no time. <img alt=\"Cheesy\" border=\"0\" src=\"https://bitcointalk.org/Smileys/default/cheesy.gif\"/><br/></div>",
        "post_num": 2,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "theymos",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=35",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg467#msg467",
        "date": "February 24, 2010, 03:07:37 AM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=63.msg452#msg452\">Quote from: satoshi on February 23, 2010, 10:15:41 PM</a></div><div class=\"quote\">On Linux it needs libgtk2.0-0 installed<br/></div><br/>Will this requirement be removed sometime? I'd rather not have to deal with GTK.</div>",
        "post_num": 3,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "sirius",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=4",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg468#msg468",
        "date": "February 24, 2010, 03:18:54 AM",
        "content": "<div class=\"post\">Gtk is required by the GUI, so it must be linked if you want to use the same binary. Making a separate binary is another option, dunno how much code tweaking and ifdeffing that would take.</div>",
        "post_num": 4,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "The Madhatter",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=14",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg478#msg478",
        "date": "February 24, 2010, 05:00:45 AM",
        "content": "<div class=\"post\"><div class=\"meaction\">* madhatter2 pulls out razor sharp hex editor</div></div>",
        "post_num": 5,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg482#msg482",
        "date": "February 24, 2010, 06:17:23 AM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=63.msg467#msg467\">Quote from: theymos on February 24, 2010, 03:07:37 AM</a></div><div class=\"quote\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=63.msg452#msg452\">Quote from: satoshi on February 23, 2010, 10:15:41 PM</a></div><div class=\"quote\">On Linux it needs libgtk2.0-0 installed<br/></div>Will this requirement be removed sometime? I'd rather not have to deal with GTK.<br/></div>How much \"dealing with\" does GTK actually require?\u00a0 Is it just a matter of \"sudo apt-get install libgtk2.0-0\" and having some extra libraries sitting around?\u00a0 GTK doesn't have to do anything, just be there for bitcoin to link to when it loads up, have the gtk-init-check call fail because no GUI present, then it's done.\u00a0 <br/><br/>It saves us butchering everything with ifdefs and a separate compile and binary to use wxBase just to try to avoid linking GTK.</div>",
        "post_num": 6,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "The Madhatter",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=14",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg483#msg483",
        "date": "February 24, 2010, 06:38:37 AM",
        "content": "<div class=\"post\"><br/>*NIX peoples are \"purists\" of sorts. They don't like to pollute their OS installs with libraries that shouldn't be necessary.<br/><br/>A million ifdefs are not the answer either. Hmm.. more thought to this may be required.<br/><br/><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=63.msg482#msg482\">Quote from: satoshi on February 24, 2010, 06:17:23 AM</a></div><div class=\"quote\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=63.msg467#msg467\">Quote from: theymos on February 24, 2010, 03:07:37 AM</a></div><div class=\"quote\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=63.msg452#msg452\">Quote from: satoshi on February 23, 2010, 10:15:41 PM</a></div><div class=\"quote\">On Linux it needs libgtk2.0-0 installed<br/></div>Will this requirement be removed sometime? I'd rather not have to deal with GTK.<br/></div>How much \"dealing with\" does GTK actually require?\u00a0 Is it just a matter of \"sudo apt-get install libgtk2.0-0\" and having some extra libraries sitting around?\u00a0 GTK doesn't have to do anything, just be there for bitcoin to link to when it loads up, have the gtk-init-check call fail because no GUI present, then it's done.\u00a0 <br/><br/>It saves us butchering everything with ifdefs and a separate compile and binary to use wxBase just to try to avoid linking GTK.<br/></div></div>",
        "post_num": 7,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "theymos",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=35",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg488#msg488",
        "date": "February 24, 2010, 06:51:40 AM",
        "content": "<div class=\"post\">I'm using Linux From Scratch, so installing a dependency-ridden package like GTK would be a bit of a pain. Why should I add a dozen additional packages and hundreds of megabytes to my system when BitCoin doesn't even use them?</div>",
        "post_num": 8,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "The Madhatter",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=14",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg493#msg493",
        "date": "February 24, 2010, 07:56:18 AM",
        "content": "<div class=\"post\">Why would you install them? Because you currently have to. I know the feeling. I run minimalist FreeBSD servers and to clutter them with X libraries is a pain.<br/><br/>However, installing them onto a X workstation is totally fine -- you usually have all of the correct dependancies already. <img alt=\"Tongue\" border=\"0\" src=\"https://bitcointalk.org/Smileys/default/tongue.gif\"/> <br/></div>",
        "post_num": 9,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "sirius",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=4",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg502#msg502",
        "date": "February 24, 2010, 06:17:35 PM",
        "content": "<div class=\"post\">This is strange... When I start Bitcoin as a daemon on my 64 bit Linux server, it eats up all the 250MB of remaining RAM, 700MB of swap and eventually crashes. On my 32 bit Ubuntu desktop, it works fine and stays at 15MB of memory usage. The server is running a 64 bit build of Bitcoin. Maybe there's something wrong with the build or something.</div>",
        "post_num": 10,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg509#msg509",
        "date": "February 24, 2010, 10:08:55 PM",
        "content": "<div class=\"post\">When and how fast did memory usage increase?\u00a0 Right away, slowly over a long time, or starting at some later event?<br/><br/>I have -daemon running on ubuntu 9.10 64-bit and memory usage is steady.<br/><br/>It has to be something about the difference on the server besides 64-bit.\u00a0 Maybe some malfunction from the lack of GUI.\u00a0 A memory leak debug tool could give a clue. </div>",
        "post_num": 11,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "sirius",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=4",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg538#msg538",
        "date": "February 25, 2010, 04:32:17 PM",
        "content": "<div class=\"post\">It started increasing right away. I'll see if valgrind can help me.</div>",
        "post_num": 12,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg539#msg539",
        "date": "February 25, 2010, 10:54:17 PM",
        "content": "<div class=\"post\">OK, I made a build target bitcoind that only links wxBase and does not link GTK.\u00a0 Version 0.2.7 on SVN.<br/><br/>I split out the init and shutdown stuff from ui.cpp into init.cpp, so now ui.cpp is pure UI.\u00a0 ui.h provides inline stubs if wxUSE_GUI=0.\u00a0 We only have four functions that interface from the node to the UI.\u00a0 In the bitcoind build, we don't link ui.o or uibase.o.<br/><br/><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=63.msg538#msg538\">Quote from: sirius-m on February 25, 2010, 04:32:17 PM</a></div><div class=\"quote\">It started increasing right away. I'll see if valgrind can help me.<br/></div>Sure feels like it could be something in wxWidgets retrying endlessly because some UI thing failed or something wasn't inited correctly.\u00a0 Our hack to ignore the initialize failure and run anyway means we're in uncharted territory.\u00a0 We're relying on the fact that we hardly use wx in this mode.\u00a0 We do still use a few things like wxGetTranslation and wxMutex.<br/><br/>Another way to debug would be to run in gdb, wait until everything is quiet and all threads should be idle, and break it and see which thread is busily doing something and what it's doing.<br/><br/>I suspect bitcoind will probably work fine, but I hope you can still debug the problem.</div>",
        "post_num": 13,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "theymos",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=35",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg553#msg553",
        "date": "February 26, 2010, 09:18:32 AM",
        "content": "<div class=\"post\">I'm getting errors when trying to compile with just wxBase.<br/><br/><div class=\"codeheader\">Code:</div><div class=\"code\">g++ -c -O0 -Wno-invalid-offsetof -Wformat -g -D__WXDEBUG__ -D__WXGTK__ -DNOPCH -I\"/opt/tdep/include\" -I\"/usr/include\" -DwxUSE_GUI=0 -o obj/nogui/util.o util.cpp<br/>In file included from util.cpp:5:<br/>headers.h:22:24: error: wx/clipbrd.h: No such file or directory<br/>In file included from headers.h:100,<br/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0from util.cpp:5:<br/>db.h: In member function 'bool CDB::Exists(const K&amp;)':<br/>db.h:140: error: 'class Db' has no member named 'exists'<br/>make: *** [obj/nogui/util.o] Error 1<br/></div><br/>Clipbrd.h isn't installed with wxBase. Moving wxWidgets-2.9.0/include/wx/clipbrd.h to my include directory just eliminates those two \"no such file\" lines.</div>",
        "post_num": 14,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg555#msg555",
        "date": "February 26, 2010, 04:29:21 PM",
        "content": "<div class=\"post\">wx/clipbrd.h isn't used, move it inside the #if wxUSE_GUI.<br/><br/>Updated headers.h on SVN.<br/><br/>Sorry, I linked to wxbase but I had full wxWidgets on my computer.<br/><br/>The db.h:140 class Db no member named \"exisits\" is stranger.\u00a0 pdb-&gt;get, pdb-&gt;put, pdb-&gt;del compiled before that.\u00a0 Do you have version 4.7.25 of Berkeley DB?<br/><br/>Db::exists()<br/><a href=\"http://www.oracle.com/technology/documentation/berkeley-db/db/api_reference/CXX/frame_main.html\">http://www.oracle.com/technology/documentation/berkeley-db/db/api_reference/CXX/frame_main.html</a><br/><a href=\"http://www.oracle.com/technology/documentation/berkeley-db/db/api_reference/CXX/dbexists.html\">http://www.oracle.com/technology/documentation/berkeley-db/db/api_reference/CXX/dbexists.html</a><br/><br/>I suppose they might have added exists recently, using get before that.</div>",
        "post_num": 15,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "theymos",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=35",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg557#msg557",
        "date": "February 26, 2010, 04:58:54 PM",
        "content": "<div class=\"post\">I'm using Berkeley DB 4.5.20.</div>",
        "post_num": 16,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "theymos",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=35",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg558#msg558",
        "date": "February 26, 2010, 07:37:50 PM",
        "content": "<div class=\"post\">Using DB-4.7.25 fixed that problem.<br/><br/>I'm now getting this error, though:<br/><div class=\"codeheader\">Code:</div><div class=\"code\">g++ -O0 -Wno-invalid-offsetof -Wformat -g -D__WXDEBUG__ -D__WXGTK__ -DNOPCH -I\"/usr/include\" -I\"/opt/tdep/include\" -o bitcoind -L\"/usr/lib\" -L\"/usr/local/lib\" -L\"/opt/tdep/lib\" obj/nogui/util.o obj/nogui/script.o obj/nogui/db.o obj/nogui/net.o obj/nogui/irc.o obj/nogui/main.o obj/nogui/rpc.o obj/nogui/init.o obj/sha.o -l wx_baseu-2.9 -Wl,-Bstatic -l boost_system -l boost_filesystem -l db_cxx -Wl,-Bdynamic -l crypto -l gthread-2.0<br/>obj/nogui/init.o: In function `wxArrayString::Item(unsigned int) const':<br/>init.cpp:(.text._ZNK13wxArrayString4ItemEj[wxArrayString::Item(unsigned int) const]+0x7): undefined reference to `wxTheAssertHandler'<br/>init.cpp:(.text._ZNK13wxArrayString4ItemEj[wxArrayString::Item(unsigned int) const]+0x42): undefined reference to `wxOnAssert(char const*, int, char const*, char const*, wchar_t const*)'<br/>collect2: ld returned 1 exit status<br/>make: *** [bitcoind] Error 1</div></div>",
        "post_num": 17,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg562#msg562",
        "date": "February 26, 2010, 11:48:44 PM",
        "content": "<div class=\"post\">Are you using wxWidgets 2.9.0?\u00a0 I don't recommend using anything other than 2.9.0.<br/><br/>It looks like they've got a reference in the wx headers (arrstr.h) to something outside of wxBase.<br/><br/>Removing -D__WXDEBUG__ from bitcoin's makefile would probably solve it.<br/><br/>If that doesn't work and you just want to get it working, you could edit wxWidgets include/wx/arrstr.h, line 167 and comment out the wxASSERT_MSG.</div>",
        "post_num": 18,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "Cdecker",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=49",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg564#msg564",
        "date": "February 27, 2010, 03:21:23 AM",
        "content": "<div class=\"post\">The headless mode is incredibly usefull. Finally I can start generating on my servers in the night <img alt=\"Cheesy\" border=\"0\" src=\"https://bitcointalk.org/Smileys/default/cheesy.gif\"/></div>",
        "post_num": 19,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "theymos",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=35",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg568#msg568",
        "date": "February 27, 2010, 07:18:31 AM",
        "content": "<div class=\"post\">Cool; it works! <img alt=\"Grin\" border=\"0\" src=\"https://bitcointalk.org/Smileys/default/grin.gif\"/> Thanks for your help!<br/><br/>I am using 2.9.0.<br/><br/>(No memory issues for me.)</div>",
        "post_num": 20,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "The Madhatter",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=14",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg603#msg603",
        "date": "March 02, 2010, 03:46:42 PM",
        "content": "<div class=\"post\">That wchar thing was what I was stuck on for the OSX build. <img alt=\"Cheesy\" border=\"0\" src=\"https://bitcointalk.org/Smileys/default/cheesy.gif\"/><br/><br/>Glad to see it is ironed out. I'll keep hacking away now.</div>",
        "post_num": 21,
        "is_displayed": true,
        "nested_level": 0
    },
    {
        "thread_id": 37,
        "name": "satoshi",
        "poster_url": "https://bitcointalk.org/index.php?action=profile;u=3",
        "subject": "Re: Command Line and JSON-RPC",
        "url": "https://bitcointalk.org/index.php?topic=63.msg633#msg633",
        "date": "March 05, 2010, 01:46:25 AM",
        "content": "<div class=\"post\"><div class=\"quoteheader\"><a href=\"https://bitcointalk.org/index.php?topic=63.msg502#msg502\">Quote from: sirius-m on February 24, 2010, 06:17:35 PM</a></div><div class=\"quote\">This is strange... When I start Bitcoin as a daemon on my 64 bit Linux server, it eats up all the 250MB of remaining RAM, 700MB of swap and eventually crashes. On my 32 bit Ubuntu desktop, it works fine and stays at 15MB of memory usage. The server is running a 64 bit build of Bitcoin. Maybe there's something wrong with the build or something.<br/></div>sirius-m debugged this, it was 64-bit related.\u00a0 <br/><br/>The fix is now available on SVN, file util.cpp.</div>",
        "post_num": 22,
        "is_displayed": true,
        "nested_level": 0
    }
]